{"version":3,"sources":["images/user-logo.png","components/Navbar/FriendsList/FriendsList.module.css","api/api.ts","components/Profile/wallpapers.ts","components/Profile/Profile.module.css","components/common/Preloader/preloader.module.css","components/Header/Header.module.css","redux/users-selectors.ts","components/Users/User/User.tsx","components/common/Paginator/Paginator.tsx","components/Users/Users.tsx","components/Dialogs/Dialogs.module.css","images/Preloader.gif","images/wallpapers/1.jpg","images/wallpapers/2.jpg","images/wallpapers/3.jpg","images/wallpapers/4.jpg","images/wallpapers/5.jpg","images/wallpapers/6.jpg","images/wallpapers/7.jpg","images/wallpapers/8.jpg","images/wallpapers/9.jpg","images/wallpapers/10.jpg","images/person-male.png","images/photo-icon.png","components/Navbar/Navbar.module.css","components/Users/Users.module.css","components/Login/login.module.css","components/Navbar/LeftNavbar.tsx","components/Navbar/FriendsList/Friend/Friend.tsx","components/Navbar/FriendsList/FriendsList-container.tsx","components/Navbar/RightNavbar.tsx","components/Dialogs/Chats/Chats.tsx","components/Dialogs/Messages/Messages.tsx","components/common/Form-controls/Form-controls.tsx","components/common/Form-controls/Form-validators.ts","components/Dialogs/New-message/NewMessage.tsx","components/Dialogs/Dialogs.tsx","hoc/withAuthRedirect.tsx","redux/dialogs-reducer.ts","components/Dialogs/Dialogs-container.tsx","components/Profile/ProfileDescription/EditProfile/EditProfile.tsx","components/Profile/ProfileDescription/About.tsx","components/Profile/ProfileDescription/Friends.tsx","redux/album-reducer.ts","components/Profile/ProfileDescription/Photo.tsx","components/Profile/ProfileDescription/Photos.tsx","components/Profile/ProfileDescription/Contacts.tsx","components/Profile/ProfileDescription/Posts/Post/PostDropdownMenu.tsx","components/Profile/ProfileDescription/Posts/Post/Post.tsx","components/Profile/ProfileDescription/Posts/NewPost/NewPost.tsx","components/Profile/ProfileDescription/Posts/Posts.tsx","components/Profile/ProfileDescription/ProfileDescription.tsx","components/Profile/ProfileHeader/ProfileMenuBar.tsx","components/Profile/ProfileHeader/ProfileStatus/ProfileStatus-hook.tsx","components/Profile/ProfileHeader/ProfilePhoto.tsx","components/Profile/ProfileHeader/ProfileTitle.tsx","components/Profile/ProfileHeader/ProfileHeader.tsx","components/Profile/Profile.tsx","redux/profile-reducer.ts","components/Profile/Profile-container.tsx","components/Header/UserMenu.tsx","components/Header/Search.tsx","components/Header/Header.tsx","redux/auth-reducer.ts","components/Header/Header-container.ts","components/Login/Login.tsx","redux/app-reducer.ts","components/Footer/Footer.tsx","components/Friends/Friends.tsx","redux/news-reducer.ts","redux/redux-store.ts","App.tsx","hoc/withSuspense.tsx","index.js","components/common/Preloader/Preloader.tsx","components/Profile/ProfileDescription/EditProfile/EditProfile.module.css","redux/users-reducer.ts","Utils/Array-changers.js","components/common/Form-controls/Form-controls.module.css","components/Profile/ProfileDescription/ProfileDescription.module.css","components/common/Paginator/Paginator.module.css"],"names":["module","exports","ResultCodes","ResultCodeWithCaptcha","apiInstance","axios","create","baseURL","withCredentials","headers","newsApi","getNewsFromServer","get","then","response","data","photoAPI","getPhotosForAlbum","numberOfPhotos","page","photos","profileAPI","getProfile","userId","setProfile","profile","put","getStatus","profileId","updateStatus","status","uploadPhoto","photoFile","formData","FormData","append","usersAPI","getUsersFromServer","count","term","friend","usersData","followAPI","follow","post","unfollow","delete","authAPI","auth","login","email","password","rememberMe","captcha","logout","getCaptcha","wallpapers","w1","w2","w3","w4","w5","w6","w7","w8","w9","w10","getUsersWithPhoto","createSelector","state","usersPage","users","filter","user","small","getUsersTotalCount","usersTotalCount","User","props","countries","require","randomCountry","Object","keys","randomCity","fetching","followingUsers","some","className","classes","src","wallpaper","alt","to","photoContainer","photo","description","name","location","city","country","buttons","followed","Button","circular","icon","color","loading","onClick","followButton","disabled","Paginator","React","memo","itemsTotalCount","itemsOnPage","onPageSelectCallback","buttonsCount","pagesCount","Math","ceil","paginatorSectionsCount","currentSection","rightLimit","existingTerm","undefined","pages","p","push","key","e","Number","currentTarget","innerText","window","scrollTo","button","selectedPage","paginator","Users","map","id","large","isFetching","length","Preloader","currentPage","pageSize","onPageChanged","paginationButtonsCount","LeftNavbar","left","navbar","item","activeClassName","active","Icon","Friend","friendName","children","title","defaultPhoto","userLogo","FriendsList","render","friendsList","this","getFriends","prevProps","friends","setState","getRandomArr","Component","FriendsListContainer","connect","RightNavbar","right","Chats","dialogs","dialog","find","cn","buddy","selectedUser","dialogImage","buddies","Messages","messages","endOfMessages","useRef","useEffect","current","scrollIntoView","messagesContainer","message","direction","from","text","messageDate","moment","date","fromNow","ref","FormControl","meta","hasError","error","touched","formControl","errorMessage","Textarea","input","restProps","wideTextarea","Input","wideInput","required","maxLength","isWebSite","includes","indexOf","maxLength200","NewMessageRedux","reduxForm","form","onSubmit","handleSubmit","newMessage","Field","component","onKeyDown","keyCode","preventDefault","ifEnterSend","newMessageText","placeholder","validate","dirty","send","type","Dialogs","sendMessage","reset","chat","mapStateToPropsForRedirect","isAuth","withAuthRedirect","actions","createNewChat","initialState","Date","dialogsReducer","action","concat","mapDispatchToProps","compose","withRouter","messagesPage","history","match","params","userID","updatingProfileInProcess","isOwner","useState","lookingForAJob","setLookingForAJob","contacts","contact","profileForm","shortInput","formRow","semiBold","bigCheckbox","checked","onChange","aboutMe","bottomSection","updateFetching","Group","Or","About","descriptionBlock","about","smallTitle","lookingForAJobDescription","friendsArr","friendsBlock","Photo","thumbnail","open","setOpen","Modal","size","closeIcon","dimmer","basic","trigger","onClose","onOpen","Content","Image","fullscreenPhoto","Photos","getPhotos","photosBlock","index","tiny","album","dispatch","a","Contacts","profileContacts","href","target","vertical","widths","PostDropdownMenu","deletePost","postId","dropdown","options","content","option","Dropdown","pointing","menuContainer","Post","likesCount","likePost","liked","setLiked","postHeader","author","defaultPicture","userName","toDateString","postText","postInfo","encodeURIComponent","likes","as","labelPosition","Label","maxLength500","newPost","Posts","addPost","posts","postsList","reverse","myPosts","newPostText","ProfileDescription","updatingProfile","updateProfile","initialValues","fullName","ProfileMenuBar","followingInProgress","pushed","setPushed","profileMenuBar","smooth","offset","duration","profileMenuOption","divider","actionButtons","ProfileStatus","editMode","setEditMode","setStatus","autoFocus","value","onBlur","ProfilePhoto","uploadingPhoto","savePhoto","ava","bluredPhoto","user_logo","photoIcon","files","invisibleInput","ProfileTitle","userPreview","ProfileHeader","profileHeader","Profile","info","profileActions","setPhoto","togglePreloader","payload","toggleUploading","toggleUpdating","updating","profileReducer","ProfileContainer","me","getProfileWithStatus","refreshProfile","resultCode","Success","parseErrorObject","errors","errorsObject","forEach","element","errorInArray","split","lastElement","search","slice","toLowerCase","substring","getState","profilePage","stopSubmit","UserMenu","dropdownMenu","avatar","menuTitle","floating","setTerm","searchBar","searchField","iconContainer","searchIcon","searchOptions","Header","pathname","header","horizontalBar","logo","currentPageName","charAt","toUpperCase","url","authReducer","HeaderContainer","maxLength30","LoginReduxForm","wrapper","greetingText","greetingTitle","loginForm","labelForCheckbox","checkbox","defaultValue","fluid","resetSection","_error","CaptchaRequired","loginPage","appActions","initialized","Footer","footer","news","newsCount","globalReducer","combineReducers","usersReducer","formReducer","app","newsPage","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","store","createStore","applyMiddleware","thunkMiddleware","UsersContainer","lazy","App","initializing","path","exact","Friends","Suspense","fallback","ConnectedApp","SocialNetwork","document","getElementById","preloader","data-testid","image","usersActions","followSuccess","unfollowSuccess","setUsers","setFriends","increasePageSize","setCurrentPage","setUsersTotalCount","toggleFollowingButton","getUsers","totalCount","currentPageFromEnd","items","followFlow","apiMethod","actionMethod","pageNumber","pageCount","changeValuesInArray","array","paramSearched","searchedValue","paramToChange","valueToChange","obj","arr","elementsCount","sort","random"],"mappings":"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","file":"static/js/main.e63d9b34.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/user-logo.18914f1c.png\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"userLogo\":\"FriendsList_userLogo__38BfW\",\"friendsList\":\"FriendsList_friendsList__VnwcF\",\"friend\":\"FriendsList_friend__mZblD\"};","import axios from 'axios';\r\nimport { profileFormDataType } from '../components/Profile/ProfileDescription/ProfileDescription';\r\nimport { PhotoType, ProfileType, UserType } from '../types/types';\r\n\r\nconst apiInstance = axios.create({\r\n    baseURL: 'https://social-network.samuraijs.com/api/1.0/',\r\n    withCredentials: true,\r\n    headers: {\r\n        'API-KEY': '1500a81d-951a-4b37-975e-19522be74bca'\r\n    }\r\n})\r\nconst newsApi = axios.create({\r\n    baseURL: 'https://newsapi.org/v2/',\r\n    headers: {\r\n        'X-Api-Key': '2abe93eb1c364e14a4657dd9de111293'\r\n    }\r\n})\r\n\r\nexport const getNewsFromServer = () => {\r\n    return newsApi.get('top-headlines?sources=techcrunch').then(response => response.data)\r\n}\r\nconst photoAPI = axios.create({\r\n    baseURL: 'https://api.pexels.com/v1/',\r\n    headers: {\r\n        'Authorization': '563492ad6f917000010000016a815fc331434f5abb389e2b1349a69d'\r\n    }\r\n})\r\nexport const getPhotosForAlbum = (numberOfPhotos: number, page: number) => {\r\n    return photoAPI.get('curated?per_page=' + numberOfPhotos + '&page=' + page).then(response => response.data.photos);\r\n}\r\nexport enum ResultCodes {\r\n    Success = 0,\r\n    Error = 1\r\n}\r\nexport enum ResultCodeWithCaptcha {\r\n    CaptchaRequired = 10\r\n}\r\nexport type ResponseType<RC = ResultCodes, D = {}> = {\r\n    resultCode: RC,\r\n    messages: Array<string>,\r\n    data: D\r\n}\r\nexport const profileAPI = {\r\n    getProfile(userId: number) {\r\n        return apiInstance.get<ProfileType>('profile/' + userId).then(response => response.data);\r\n    },\r\n    setProfile(profile: profileFormDataType) {\r\n        return apiInstance.put<ResponseType>('profile', profile).then(response => response.data);\r\n    },\r\n    getStatus(profileId: number) {\r\n        return apiInstance.get<string>('profile/status/' + profileId).then(response => response.data);\r\n    },\r\n    updateStatus(status: string) {\r\n        return apiInstance.put<ResponseType>('profile/status', { status }).then(response => response.data);\r\n    },\r\n    uploadPhoto(photoFile: File) {\r\n        const formData = new FormData();\r\n        formData.append(\"image\", photoFile);\r\n        return apiInstance.put<ResponseType<ResultCodes, {photos: PhotoType}>>('profile/photo', formData, {\r\n            headers: {\r\n                'Content-Type': 'multipart/form-data'\r\n            }\r\n        }).then(response => response.data)\r\n    }\r\n}\r\ntype GetUsersResponse = {\r\n    items: Array<UserType>\r\n    totalCount: number\r\n    error: string\r\n}\r\nexport const usersAPI = {\r\n    getUsersFromServer(page = 1, count = 10, term = null as null | string, friend = null as null | boolean) {\r\n        let usersData = apiInstance.get<GetUsersResponse>(`users?page=${page}&count=${count}${term !== null ? '&term=' + term : ''}${friend !== null ? '&friend=' + friend : ''}`).then(response => response.data);\r\n        return usersData;\r\n    }\r\n}\r\n\r\nexport const followAPI = {\r\n    follow(userId: number) {\r\n        let follow = apiInstance.post<ResponseType>('follow/' + userId).then(response => response.data);\r\n        return follow;\r\n    },\r\n    unfollow(userId: number) {\r\n        let unfollow = apiInstance.delete<ResponseType>('follow/' + userId).then(response => response.data);\r\n        return unfollow;\r\n    }\r\n}\r\nexport type AuthResponse = ResponseType<\r\n    ResultCodes, \r\n    {\r\n    id: number\r\n    email: string\r\n    login: string}>\r\ntype LoginResponse = ResponseType<ResultCodes | ResultCodeWithCaptcha, {userId: number}>\r\ntype GetCaptchaResponse = {\r\n    url: string\r\n}\r\nexport const authAPI = {\r\n    auth() {\r\n        return apiInstance.get<AuthResponse>('auth/me').then(response => response.data)\r\n    },\r\n    login(email: string, password: string, rememberMe: boolean, captcha: string) {\r\n        return apiInstance.post<LoginResponse>('auth/login', { email, password, rememberMe, captcha }).then(response => response.data)\r\n    },\r\n    logout() {\r\n        return apiInstance.delete<ResponseType>('auth/login').then(response => response.data)\r\n    },\r\n    getCaptcha() {\r\n        return apiInstance.get<GetCaptchaResponse>('security/get-captcha-url').then(response => response.data);\r\n    }\r\n}\r\n","import w1 from '../../images/wallpapers/1.jpg';\r\nimport w2 from '../../images/wallpapers/2.jpg';\r\nimport w3 from '../../images/wallpapers/3.jpg';\r\nimport w4 from '../../images/wallpapers/4.jpg';\r\nimport w5 from '../../images/wallpapers/5.jpg';\r\nimport w6 from '../../images/wallpapers/6.jpg';\r\nimport w7 from '../../images/wallpapers/7.jpg';\r\nimport w8 from '../../images/wallpapers/8.jpg';\r\nimport w9 from '../../images/wallpapers/9.jpg';\r\nimport w10 from '../../images/wallpapers/10.jpg';\r\n\r\nexport const wallpapers = [w1,w2,w3,w4,w5,w6,w7,w8,w9,w10];","// extracted by mini-css-extract-plugin\nmodule.exports = {\"status\":\"Profile_status__3D7TO\",\"photoIcon\":\"Profile_photoIcon__3igOK\",\"invisibleInput\":\"Profile_invisibleInput__2vIv9\",\"profileHeader\":\"Profile_profileHeader__thYNt\",\"wallpaper\":\"Profile_wallpaper__2TLd2\",\"ava\":\"Profile_ava__1r20P\",\"userPreview\":\"Profile_userPreview__398v2\",\"fullName\":\"Profile_fullName__ZvLfE\",\"bluredPhoto\":\"Profile_bluredPhoto__1dji_\",\"profileMenuBar\":\"Profile_profileMenuBar__9KYyk\",\"actionButtons\":\"Profile_actionButtons__scuqF\",\"profileMenuOption\":\"Profile_profileMenuOption__voyxF\",\"divider\":\"Profile_divider__Zkof6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"image\":\"preloader_image__3BlKC\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dropdownMenu\":\"Header_dropdownMenu__3KXdt\",\"menuContainer\":\"Header_menuContainer__KkeZw\",\"option\":\"Header_option__1bQce\",\"menuTitle\":\"Header_menuTitle__3FTnD\",\"horizontalBar\":\"Header_horizontalBar__1Fsq6\",\"header\":\"Header_header__6mOs8\",\"footer\":\"Header_footer__AHvJ1\",\"logo\":\"Header_logo__2QIV9\",\"currentPageName\":\"Header_currentPageName__1RSnf\",\"userInfo\":\"Header_userInfo__2btRr\",\"user\":\"Header_user__1U36Y\",\"login\":\"Header_login__gMwit\",\"logOut\":\"Header_logOut__Wr40Z\",\"searchBar\":\"Header_searchBar__2kb71\",\"searchField\":\"Header_searchField__1MzpJ\",\"iconContainer\":\"Header_iconContainer__2Rc5z\",\"searchIcon\":\"Header_searchIcon__8woWs\",\"searchOptions\":\"Header_searchOptions__THHN8\"};","import { createSelector } from \"reselect\"\r\nimport {AppStateType} from './redux-store'\r\nimport {UserType} from '../types/types'\r\n\r\nexport const getUsersSelector = (state: AppStateType) => {\r\n    return state.usersPage.users\r\n}\r\nexport const getUsersWithPhoto = createSelector(getUsersSelector, (users: Array<UserType>): Array<UserType> => {\r\n    return users.filter((user: UserType) => !!user.photos.small);\r\n});\r\nexport const getUsersTotalCount = (state: AppStateType) => {\r\n    return state.usersPage.usersTotalCount\r\n}","import React from 'react';\r\nimport classes from './../Users.module.css';\r\nimport user from '../../../images/user-logo.png';\r\nimport { NavLink } from 'react-router-dom';\r\nimport { wallpapers } from '../../Profile/wallpapers';\r\nimport { Button } from 'semantic-ui-react';\r\n\r\ntype PropsType = {\r\n    userId: number,\r\n    followingUsers: Array<number>,\r\n    photo: string | null,\r\n    name: string,\r\n    followed: boolean,\r\n    follow: (userId: number) => void,\r\n    unfollow: (userId: number) => void\r\n}\r\nconst User: React.FC<PropsType> = (props) => {\r\n    const countries = require('../../../Utils/countries.json');\r\n    const randomCountry = Object.keys(countries)[props.userId % 100];\r\n    let randomCity = countries[randomCountry][props.userId % 10];\r\n    if (!randomCity) randomCity = countries[randomCountry][0];\r\n    let fetching = (user: number) => {\r\n        return props.followingUsers.some((userId) => userId === user) ? true : false;\r\n    }\r\n    return (\r\n        \r\n        <div className={classes.user}>\r\n            \r\n                <img src={wallpapers[props.userId % 10]} className={classes.wallpaper} alt=''/>\r\n                <NavLink to={\"/profile/\" + props.userId}><div className={classes.photoContainer}><img src={props.photo ? props.photo : user} className={classes.photo} alt=\"user\"/></div></NavLink>\r\n                <div className={classes.description}>\r\n                    <NavLink to={\"/profile/\" + props.userId}><p className={classes.name}>{props.name}</p></NavLink>\r\n                    <div className={classes.location}>\r\n                    <p className={classes.city}>{randomCity + ','}</p>\r\n                    <p className={classes.country}>{randomCountry}</p>\r\n                    \r\n                    </div>\r\n                </div>\r\n\r\n                <div className={classes.buttons}>\r\n                    {props.followed ?\r\n    \r\n                    <>\r\n                        <Button circular icon=\"remove user\" color=\"pink\" loading={fetching(props.userId)}\r\n                        onClick={() => {props.unfollow(props.userId);}}\r\n                        className={classes.followButton}/>\r\n    \r\n                        <NavLink to={'/dialogs/' + props.userId}>\r\n                            <Button circular icon=\"paper plane outline\" color=\"purple\" className={classes.followButton}/>\r\n                        </NavLink>\r\n                    </>\r\n    \r\n                    : <>\r\n                        <Button circular icon=\"add user\"  color=\"green\" loading={fetching(props.userId)} \r\n                        onClick={() => {props.follow(props.userId);}}\r\n                        className={classes.followButton}/>\r\n    \r\n                        <Button disabled circular icon=\"paper plane outline\" color=\"purple\" className={classes.followButton}/>\r\n                    </>}\r\n                </div>\r\n                \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default User;","import classes from './Paginator.module.css';\r\nimport React from 'react';\r\n\r\ntype PropsType = {\r\n    itemsTotalCount: number\r\n    itemsOnPage: number\r\n    onPageSelectCallback: (pageNumber: number, pageSize: number, term?: string) => void\r\n    buttonsCount: number\r\n    page: number\r\n    term: string | null\r\n}\r\nconst Paginator: React.FC<PropsType> = React.memo(({itemsTotalCount, itemsOnPage, onPageSelectCallback, buttonsCount, page, term}) => {\r\n    const pagesCount = Math.ceil(itemsTotalCount/itemsOnPage);\r\n    const paginatorSectionsCount = Math.ceil(pagesCount/buttonsCount);\r\n    let currentSection = Math.ceil(page/buttonsCount);\r\n    let leftLimit = (currentSection - 1) * buttonsCount + 1;\r\n    let rightLimit = currentSection * buttonsCount;\r\n    const existingTerm = term ? term : undefined;\r\n    if (rightLimit > pagesCount) { rightLimit = pagesCount;}\r\n    const goPrev = () => {\r\n        onPageSelectCallback((currentSection-1) * buttonsCount, itemsOnPage, existingTerm);\r\n    }\r\n    const goNext = () => {\r\n        onPageSelectCallback(currentSection * buttonsCount + 1, itemsOnPage, existingTerm);\r\n    }\r\n    let pages = [];\r\n    for (let p = leftLimit; p <= rightLimit; p++) {\r\n        pages.push(<div key={p} \r\n            onClick={(e) => {onPageSelectCallback(Number(e.currentTarget.innerText), itemsOnPage, existingTerm); window.scrollTo(0, 0);}}\r\n            className={`${classes.button} ${p === page && classes.selectedPage}`}>{p}</div>);\r\n    }\r\n    return (\r\n        <div className={classes.paginator}>\r\n            {currentSection > 1 && <button className={classes.button} onClick={goPrev}>←</button>}\r\n            <div className={classes.pages}>{pagesCount > 1 && pages}</div>\r\n            {currentSection < paginatorSectionsCount && <button className={classes.button} onClick={goNext}>→</button>}\r\n        </div>\r\n    )\r\n})\r\n\r\nexport default Paginator;","import React from 'react';\r\nimport classes from './Users.module.css'\r\nimport User from './User/User';\r\nimport Preloader from '../common/Preloader/Preloader';\r\nimport Paginator from '../common/Paginator/Paginator';\r\nimport { UsersConnectedPropsType } from '../Friends/Friends';\r\n\r\nconst Users: React.FC<UsersConnectedPropsType> = (props) => {\r\n    let users = props.users.map(\r\n        (user) => <User key={user.id} name={user.name} userId={user.id}\r\n        photo={user.photos.large} followed={user.followed} follow={props.follow}\r\n        unfollow={props.unfollow} followingUsers= {props.followingUsers}/>);\r\n\r\n    return (\r\n        (props.isFetching || props.users.length === 0) ? <Preloader /> :\r\n        <div className={classes.usersPage}>\r\n                <div className={classes.users}>\r\n                    {users}\r\n                </div>\r\n\r\n        {!!props.currentPage && <Paginator term ={props.term} itemsTotalCount={props.usersTotalCount} itemsOnPage={props.pageSize} \r\n                onPageSelectCallback={props.onPageChanged} buttonsCount={props.paginationButtonsCount} page={props.currentPage}/>}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Users;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dialogs\":\"Dialogs_dialogs__paPYd\",\"chat\":\"Dialogs_chat__3fe-6\",\"buddies\":\"Dialogs_buddies__oAGuY\",\"buddy\":\"Dialogs_buddy__1uIDn\",\"messagesContainer\":\"Dialogs_messagesContainer__3prAn\",\"messages\":\"Dialogs_messages__1358W\",\"message\":\"Dialogs_message__3on-B\",\"messageDate\":\"Dialogs_messageDate__12n18\",\"from\":\"Dialogs_from__3fDkO\",\"active\":\"Dialogs_active__3FMLt\",\"to\":\"Dialogs_to__3lZt1\",\"selectedUser\":\"Dialogs_selectedUser__3bT33\",\"dialogImage\":\"Dialogs_dialogImage__3vGAn\",\"newMessage\":\"Dialogs_newMessage__3JgDu\",\"newMessageText\":\"Dialogs_newMessageText__279Mb\",\"errorMessage\":\"Dialogs_errorMessage__3d08n\",\"send\":\"Dialogs_send__2m5EZ\"};","module.exports = __webpack_public_path__ + \"static/media/Preloader.3295b1ec.gif\";","module.exports = __webpack_public_path__ + \"static/media/1.4a66d64e.jpg\";","module.exports = __webpack_public_path__ + \"static/media/2.de380ab1.jpg\";","module.exports = __webpack_public_path__ + \"static/media/3.3987a05d.jpg\";","module.exports = __webpack_public_path__ + \"static/media/4.3221c1c0.jpg\";","module.exports = __webpack_public_path__ + \"static/media/5.c66e3330.jpg\";","module.exports = __webpack_public_path__ + \"static/media/6.b58aee8b.jpg\";","module.exports = __webpack_public_path__ + \"static/media/7.4f710739.jpg\";","module.exports = __webpack_public_path__ + \"static/media/8.0848863e.jpg\";","module.exports = __webpack_public_path__ + \"static/media/9.77ca511b.jpg\";","module.exports = __webpack_public_path__ + \"static/media/10.5f8be0b5.jpg\";","module.exports = __webpack_public_path__ + \"static/media/person-male.77a337e5.png\";","module.exports = __webpack_public_path__ + \"static/media/photo-icon.7b4465c4.png\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"left\":\"Navbar_left__Ylda7\",\"right\":\"Navbar_right__3dbeI\",\"navbar\":\"Navbar_navbar__2IowR\",\"item\":\"Navbar_item__34HwD\",\"icon\":\"Navbar_icon__l7YSR\",\"active\":\"Navbar_active__3Pspa\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"users\":\"Users_users__FueH0\",\"user\":\"Users_user__2_Dk-\",\"wallpaper\":\"Users_wallpaper__HWwEx\",\"photoContainer\":\"Users_photoContainer__2foAU\",\"photo\":\"Users_photo__34FFQ\",\"description\":\"Users_description__Mcw3E\",\"buttons\":\"Users_buttons__3Aphx\",\"followButton\":\"Users_followButton__2fZOR\",\"name\":\"Users_name__2Sje5\",\"location\":\"Users_location__Mn7AS\",\"pagination\":\"Users_pagination__3i3YS\",\"selectedPage\":\"Users_selectedPage__2LTzD\",\"pageNumber\":\"Users_pageNumber__3Jf1t\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loginPage\":\"login_loginPage__MMsSR\",\"wrapper\":\"login_wrapper__3PDXK\",\"greetingText\":\"login_greetingText__13gCA\",\"greetingTitle\":\"login_greetingTitle__2tTVi\",\"header\":\"login_header__5pQcp\",\"loginForm\":\"login_loginForm__3IZuF\",\"formRow\":\"login_formRow__1fPIH\",\"checkbox\":\"login_checkbox__25VKi\",\"labelForCheckbox\":\"login_labelForCheckbox__2X-n_\",\"button\":\"login_button__2VCcT\",\"errorMessage\":\"login_errorMessage__1pN1L\"};","import React from 'react';\r\nimport classes from './Navbar.module.css';\r\nimport { NavLink } from 'react-router-dom';\r\nimport { Icon } from 'semantic-ui-react';\r\n\r\nconst LeftNavbar: React.FC = () => {\r\n    return (\r\n        <nav className={classes.left + ' ' + classes.navbar}>\r\n            <div className={`${classes.item}`}>\r\n                <NavLink to=\"/profile\" activeClassName={classes.active}><Icon className={classes.icon} name=\"user outline\"/></NavLink>\r\n            </div>\r\n            <div className={classes.item}>\r\n                <NavLink to=\"/friends\" activeClassName={classes.active}><Icon className={classes.icon} name=\"handshake outline\"/></NavLink>\r\n            </div>\r\n            <div className={classes.item}>\r\n                <NavLink to=\"/dialogs\" activeClassName={classes.active}><Icon className={classes.icon} name=\"wechat\"/></NavLink>\r\n            </div>\r\n            {/* \r\n            News page is in development\r\n            <div className={classes.item}>\r\n                <NavLink to=\"/news\" activeClassName={classes.active}><Icon className={classes.icon} name=\"newspaper outline\"/></NavLink>\r\n            </div> */}\r\n            <div className={classes.item}>\r\n                <NavLink to=\"/users\" activeClassName={classes.active}><Icon className={classes.icon} name=\"users\"/></NavLink>\r\n            </div>\r\n        </nav>\r\n    );\r\n}\r\n\r\nexport default LeftNavbar;","import React from 'react';\r\nimport classes from './../FriendsList.module.css';\r\nimport { NavLink } from 'react-router-dom';\r\nimport defaultPhoto from '../../../../images/user-logo.png';\r\n\r\ntype PropsType = {\r\n    photo: string | null,\r\n    friendName?: string,\r\n    id: number,\r\n    children?: React.ReactNode\r\n}\r\nconst Friend: React.FC<PropsType> = ({photo, friendName, id, children}) => {\r\n    return (\r\n        <div className={classes.friend}>\r\n            <NavLink to={'/profile/' + id } title={friendName}><img src={photo ? photo : defaultPhoto} className={classes.userLogo} alt=''/> {children}</NavLink>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Friend;","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport classes from './FriendsList.module.css';\r\nimport Friend from './Friend/Friend';\r\nimport {getFriends} from '../../../redux/users-reducer'\r\nimport { getRandomArr } from '../../../Utils/Array-changers';\r\nimport { UserType } from '../../../types/types';\r\nimport { AppStateType } from '../../../redux/redux-store';\r\n\r\ntype StateType = {\r\n    friendsList: Array<UserType>\r\n}\r\nclass FriendsList extends React.Component<PropsType, StateType> {\r\n    constructor (props: PropsType) {\r\n        super(props);\r\n        this.state = {friendsList: []}\r\n    }\r\n    componentDidMount () {\r\n        this.props.getFriends();\r\n    }\r\n    componentDidUpdate (prevProps: PropsType) {\r\n        if (this.props.friends && prevProps.friends !== this.props.friends) {\r\n            this.setState({friendsList : getRandomArr(this.props.friends.map (friend =>\r\n            <Friend friendName={friend.name} photo={friend.photos.small ? friend.photos.small : ''} key={friend.id} id = {friend.id}/>), 8)})\r\n        }\r\n    }\r\n    render = () =>  (\r\n            <div className={classes.friendsList}>\r\n                {this.state.friendsList}\r\n            </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state: AppStateType) => {\r\n    return {\r\n        friends: state.usersPage.friends\r\n    }\r\n}\r\ntype MapStateToPropsType = ReturnType<typeof mapStateToProps>\r\ntype MapDispatchToPropsType = {getFriends: () => void}\r\ntype PropsType = MapStateToPropsType & MapDispatchToPropsType;\r\nconst FriendsListContainer = connect(mapStateToProps, {getFriends})(FriendsList);\r\n\r\nexport default FriendsListContainer;","import React from 'react';\r\nimport classes from './Navbar.module.css';\r\nimport FriendsListContainer from './FriendsList/FriendsList-container';\r\n\r\nconst RightNavbar: React.FC = () => {\r\n    return (\r\n        <div className={classes.right + ' ' + classes.navbar}>\r\n            <FriendsListContainer/>\r\n        </div>\r\n    );\r\n}\r\n\r\n\r\nexport default RightNavbar;","import React from 'react';\r\nimport classes from './../Dialogs.module.css';\r\nimport { NavLink } from 'react-router-dom';\r\nimport cn from 'classnames'\r\nimport { DialogType, UserType } from '../../../types/types';\r\n\r\ntype PropsType = {\r\n    friends: Array<UserType>,\r\n    dialogs: Array<DialogType>,\r\n    userId: number\r\n}\r\n\r\nconst Chats: React.FC<PropsType> = (props) => {\r\n    \r\n    let dialogs = props.friends.length > 0 && props.dialogs.map(dialog => {\r\n        let friend = props.friends.find(friend => friend.id === dialog.userId);\r\n        let name, photo;\r\n        if (!!friend) {\r\n        name = friend.name;\r\n        photo = friend.photos.small\r\n        }\r\n        return (<div className={cn(classes.buddy, props.userId === dialog.userId && classes.selectedUser)} key={dialog.userId}>\r\n            <img className={classes.dialogImage} src={photo !== null ? photo: undefined} alt='' />\r\n            <NavLink to={\"/dialogs/\" + dialog.userId} activeClassName={classes.active}>{name}</NavLink>\r\n        </div>)\r\n    }\r\n    );\r\n    return (\r\n        <div className={classes.buddies}>\r\n            {dialogs}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Chats;","import React from 'react';\r\nimport { useEffect } from 'react';\r\nimport { useRef } from 'react';\r\nimport classes from './../Dialogs.module.css';\r\nimport moment from 'moment'\r\nimport { MessageType } from '../../../types/types';\r\n\r\ntype PropsType = {\r\n    messages: Array<MessageType>\r\n}\r\nconst Messages: React.FC<PropsType> = ({ messages }) => {\r\n    let endOfMessages = useRef<HTMLInputElement>(null);\r\n    const scrollToBottom = () => {\r\n        !!endOfMessages.current && endOfMessages.current.scrollIntoView(false);\r\n    }\r\n    useEffect(() => {scrollToBottom()}, [messages, endOfMessages]);\r\n    return (\r\n        <div className={classes.messagesContainer}>\r\n            <div className={classes.messages}>\r\n                {!!messages && messages.map(message =>\r\n\r\n                    <div key={message.id} className={classes.message + ' ' + (message.direction === 'from' ? classes.from : classes.to)}>\r\n                        <div>{message.text}</div>\r\n                        <div className={classes.messageDate}>{moment(message.date).fromNow()}</div>\r\n                    </div>)}\r\n\r\n                <div ref={endOfMessages}/>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Messages;","import React from 'react';\r\nimport classes from './Form-controls.module.css';\r\nimport cn from 'classnames'\r\nimport { Field } from 'redux-form';\r\n\r\ntype MetaType = {\r\n    error: string,\r\n    touched: boolean\r\n}\r\ntype PropsType = {\r\n    meta: MetaType\r\n}\r\ntype InputPropsType = {\r\n    name: string,\r\n    placeholder?: string,\r\n    type?: string\r\n}\r\nconst FormControl: React.FC<PropsType> = ({meta, children}) => {\r\n    const hasError = !!meta.error && meta.touched;\r\n    return (\r\n        <div className={cn(classes.formControl, hasError && classes.hasError)}>\r\n            {children}\r\n            <span className={classes.errorMessage}>{hasError && meta.error}</span>\r\n        </div>\r\n    )\r\n}\r\n\r\ntype FieldPropsType = {\r\n    input: InputPropsType,\r\n    meta: MetaType,\r\n    innerText: string\r\n}\r\nexport const createField = (name: string, placeholder: string, type?: string | React.ReactNode, innerText?: string): React.ReactNode => {\r\n    return (\r\n        <Field />\r\n    )\r\n}\r\nexport const Textarea: React.FC<FieldPropsType> = ({input, meta, innerText, ...restProps}) => {\r\n    return (\r\n        <FormControl meta={meta}>\r\n            <span className={classes.innerText}>{innerText}</span>\r\n            <textarea className={!!innerText ? classes.wideTextarea : undefined} {...input} {...restProps}/>\r\n        </FormControl>\r\n    )\r\n}\r\nexport const Input: React.FC<FieldPropsType> = ({input, meta, innerText, ...restProps}) => {\r\n    return (\r\n        <FormControl meta={meta}>\r\n            <span className={classes.innerText}>{innerText}</span>\r\n            <input className={!!innerText ? classes.wideInput : undefined}{...input} {...restProps}/>\r\n        </FormControl>\r\n    )\r\n}\r\n","export const required = (data: string) => {\r\n    return data ? undefined : 'Field is required';\r\n}\r\nexport const maxLength = (length: number) => {\r\n    return ((data:string) => {\r\n        return !data ? undefined\r\n        : data.length > length ? `Max length is ${length} symbols` : undefined\r\n    })\r\n}\r\nexport const isWebSite = (data: string) => {\r\n    if (!data) return undefined;\r\n    return ((data.includes('https://') || data.includes('http://')) && data.indexOf('.') > 8 && data.indexOf('.') < data.length - 2)\r\n     ? undefined \r\n     : 'Incorrect website name';\r\n}","import React from 'react';\r\nimport { Field, InjectedFormProps, reduxForm } from 'redux-form';\r\nimport { Button } from 'semantic-ui-react';\r\nimport classes from '../Dialogs.module.css';\r\nimport { Textarea } from '../../common/Form-controls/Form-controls';\r\nimport { maxLength } from '../../common/Form-controls/Form-validators';\r\nimport { NewMessageType } from '../Dialogs';\r\n\r\n\r\n//reduxForm props??\r\nconst maxLength200 = maxLength (200);\r\nconst NewMessage: React.FC<InjectedFormProps<NewMessageType>> = (props) => {\r\n    const ifEnterSend = (key: React.KeyboardEvent<HTMLInputElement>) => {\r\n        if (key.keyCode === 13) {\r\n            key.preventDefault();\r\n            props.handleSubmit(key);\r\n        }\r\n    }\r\n    return (\r\n        <form onSubmit={props.handleSubmit} className={classes.newMessage}>\r\n            <Field component={Textarea} onKeyDown={(key: React.KeyboardEvent<HTMLInputElement>) => {ifEnterSend(key)}} className={classes.newMessageText} placeholder=\"Write your message here...\"\r\n            name=\"newMessageText\" validate={[maxLength200]}/>\r\n            <Button disabled={!props.dirty} className={classes.send} color=\"purple\" type=\"submit\">Send</Button>\r\n        </form>\r\n    )\r\n}\r\n\r\nconst NewMessageRedux = reduxForm<NewMessageType>({form: \"newMessageForm\"})(NewMessage);\r\n\r\nexport default NewMessageRedux;","import React from 'react';\r\nimport classes from './Dialogs.module.css';\r\nimport Chats from './Chats/Chats';\r\nimport Messages from './Messages/Messages';\r\nimport NewMessageRedux from './New-message/NewMessage';\r\nimport { DialogType, MessageType, UserType } from '../../types/types';\r\n\r\n//data type in redux from??\r\ntype PropsType = {\r\n    messages: Array<MessageType>,\r\n    userId: number,\r\n    friends: Array<UserType>,\r\n    dialogs: Array<DialogType>,\r\n    sendMessage: (message: string, userId: number) => void,\r\n    reset: (formName: string) => void\r\n}\r\nexport type NewMessageType = {newMessageText: string}\r\nconst Dialogs: React.FC<PropsType> = ({messages, userId, friends, dialogs, sendMessage, reset}) => {\r\n    \r\n\r\n    return (\r\n        <div className={classes.dialogs}>\r\n            <div className={classes.chat}>\r\n                <Messages messages={messages} />\r\n                <NewMessageRedux \r\n                onSubmit={(data : NewMessageType) => { sendMessage(data.newMessageText, userId); reset('newMessageForm')}}/>\r\n            </div>\r\n            <Chats dialogs={dialogs} userId={userId} friends={friends} />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Dialogs;","import React from 'react';\r\nimport { Redirect } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { AppStateType } from '../redux/redux-store';\r\n\r\nconst mapStateToPropsForRedirect = (state: AppStateType) => {\r\n    return {isAuth: state.auth.isAuth}\r\n}\r\ntype MapStateToPropsType = ReturnType<typeof mapStateToPropsForRedirect>\r\nexport const withAuthRedirect = (Component: React.ComponentType) => {\r\n    const RedirectComponent: React.FC<MapStateToPropsType> = ({isAuth, ...props}) => {\r\n        return !isAuth\r\n        ? <Redirect to='/login'/>\r\n        : <Component {...props} />\r\n        }\r\n    const ConnectedRedirectComponent = connect (mapStateToPropsForRedirect)(RedirectComponent);\r\n    return ConnectedRedirectComponent;\r\n}","import { ActionsType, DialogType } from \"../types/types\";\r\n\r\nexport const actions = {\r\n    sendMessage: (newMessageText: string, userId: number) => ({type: 'SEND_MESSAGE', newMessageText, userId} as const),\r\n    createNewChat: (userId: number) => ({type: 'CREATE_NEW_CHAT', userId} as const)\r\n}\r\n\r\ntype DialogsActionsType = ActionsType<typeof actions>;\r\n\r\ntype InitialStateType = {dialogs: Array<DialogType>}\r\nconst initialState: InitialStateType = {\r\n    dialogs:\r\n        [\r\n            {userId: 8349,\r\n            messages : [{ text: \"Hey, man!\", id: 1, direction: 'from', date: new Date(2020, 9, 10, 12, 34, 23, 0) },\r\n            { text: \"How are you?\", id: 2, direction: 'from', date: new Date(2020, 9, 10, 12, 35, 23, 0) },\r\n            { text: \"Hey! I'm fine. Let's meet today!\", id: 3, direction: 'to', date: new Date(2020, 9, 10, 12, 36, 23, 0) },\r\n            { text: \"How about 8 o'clock?\", id: 4, direction: 'from', date: new Date(2020, 9, 10, 12, 37, 23, 0) },\r\n            { text: \"Ok, great!\", id: 5, direction: 'to', date: new Date(2020, 9, 10, 12, 38, 23, 0) },\r\n            { text: \"See you tomorrow!\", id: 6, direction: 'to', date: new Date(2020, 9, 10, 12, 39, 23, 0) },\r\n            { text: \"Don't forget you umbrella, it's gonna be rainy tomorrow:(\", id: 7, direction: 'from', date: new Date(2020, 9, 10, 12, 42, 23, 0) },\r\n            { text: \"Sure)\", id: 8, direction: 'to', date: new Date(2020, 9, 10, 12, 45, 23, 0) },\r\n            { text: \"You too!\", id: 9, direction: 'to', date: new Date(2020, 9, 10, 12, 51, 23, 0) }]},\r\n\r\n            {userId: 9510,\r\n            messages: [{ text: \"Hi!\", id: 1, direction: 'from', date: new Date(2020, 8, 2, 11, 34, 23, 0) },\r\n            { text: \"I have a problem with the hometask:(\", id: 2, direction: 'from', date: new Date(2020, 8, 2, 11, 35, 23, 0) },\r\n            { text: \"Hey! How can I help you?\", id: 3, direction: 'to', date: new Date(2020, 8, 2, 11, 36, 23, 0) },\r\n            { text: \"I don't have materials from last lection(\", id: 4, direction: 'from', date: new Date(2020, 8, 2, 11, 37, 23, 0) },\r\n            { text: \"I'll send you them!\", id: 5, direction: 'to', date: new Date(2020, 8, 2, 11, 38, 23, 0) },\r\n            { text: \"Don't worry!\", id: 6, direction: 'to', date: new Date(2020, 8, 2, 11, 39, 23, 0) },\r\n            { text: \"You're saving me!\", id: 7, direction: 'from', date: new Date(2020, 8, 2, 11, 40, 23, 0) },\r\n            { text: \"Thank you)\", id: 8, direction: 'from', date: new Date(2020, 8, 2, 11, 41, 23, 0) },\r\n            { text: \"No problem)\", id: 9, direction: 'to', date: new Date(2020, 8, 2, 11, 45, 23, 0) }]},\r\n\r\n            {userId: 7180,\r\n            messages: [{ text: \"psss\", id: 1, direction: 'from', date: new Date(2020, 9, 12, 11, 34, 23, 0) },\r\n            { text: \"How are you?\", id: 2, direction: 'from', date: new Date(2020, 9, 12, 12, 34, 23, 0) },\r\n            { text: \"I'm great! Wanna meet today?\", id: 3, direction: 'to', date: new Date(2020, 9, 12, 13, 34, 23, 0) },\r\n            { text: \"How about 5 o'clock?\", id: 4, direction: 'from', date: new Date(2020, 9, 12, 14, 34, 23, 0) },\r\n            { text: \"Ok, great!\", id: 5, direction: 'to', date: new Date(2020, 9, 12, 15, 34, 23, 0)  },\r\n            { text: \"See you soon!\", id: 6, direction: 'to', date: new Date(2020, 9, 12, 16, 34, 23, 0) },\r\n            { text: \"Take some snacks, please)\", id: 7, direction: 'from', date: new Date(2020, 9, 12, 17, 34, 23, 0) },\r\n            { text: \"Ok, I'm hungry too)\", id: 8, direction: 'to', date: new Date(2020, 9, 12, 18, 34, 23, 0) },\r\n            { text: \"Prepare yourself!)\", id: 9, direction: 'to', date: new Date(2020, 9, 12, 19, 34, 23, 0) }]},\r\n\r\n            {userId: 7084,\r\n            messages: [{ text: \"Hi, darling\", id: 1, direction: 'to', date: new Date(2020, 9, 10, 11, 34, 23, 0) },\r\n            { text: \"Hi, cutee!)\", id: 2, direction: 'from', date: new Date(2020, 9, 10, 11, 34, 25, 0) },\r\n            { text: \"I miss you! How about tomorrow? Have some plans?\", id: 3, direction: 'to', date: new Date(2020, 9, 10, 11, 35, 23, 0) },\r\n            { text: \"I have a huge load of crap on my job(( \", id: 4, direction: 'from', date: new Date(2020, 9, 10, 11, 36, 23, 0) },\r\n            { text: \"Maybe on monday?\", id: 5, direction: 'from', date: new Date(2020, 9, 10, 11, 37, 23, 0) },\r\n            { text: \"Sure, why not))\", id: 6, direction: 'to', date: new Date(2020, 9, 10, 11, 40, 23, 0) },\r\n            { text: \"So, will see you on monday:(\", id: 7, direction: 'from', date: new Date(2020, 9, 10, 11, 42, 23, 0) },\r\n            { text: \"Can't wait)\", id: 8, direction: 'from', date: new Date(2020, 9, 10, 11, 44, 23, 0) },\r\n            { text: \"Me too!\", id: 9, direction: 'to', date: new Date(2020, 9, 10, 11, 46, 23, 0) }]},\r\n\r\n            {userId: 11753,\r\n            messages: [{ text: \"Hey, man!\", id: 1, direction: 'from', date: new Date(2020, 9, 5, 11, 34, 23, 0) },\r\n            { text: \"Have some news?\", id: 2, direction: 'from', date: new Date(2020, 9, 5, 11, 34, 27, 0) },\r\n            { text: \"Nope, sorry(\", id: 3, direction: 'to', date: new Date(2020, 9, 5, 11, 34, 35, 0) },\r\n            { text: \"Okay, I'll wait)\", id: 4, direction: 'from', date: new Date(2020, 9, 5, 11, 34, 47, 0) },\r\n            { text: \"Good news! Your photos are ready. You can get them tomorrow in the office from 9 till 17 o'clock!\", id: 5, direction: 'to', date: new Date(2020, 9, 5, 11, 34, 53, 0) },\r\n            { text: \"Great!\", id: 6, direction: 'from', date: new Date(2020, 9, 5, 11, 35, 23, 0) },\r\n            { text: \"I'll come on the afternoon\", id: 7, direction: 'from', date: new Date(2020, 9, 5, 11, 37, 23, 0) },\r\n            { text: \"Okay\", id: 8, direction: 'to', date: new Date(2020, 9, 5, 11, 45, 23, 0) },\r\n            { text: \"Don't forget passport!\", id: 9, direction: 'to',date: new Date(2020, 9, 5, 13, 34, 23, 0) },\r\n            { text: \"Sure!\", id: 10, direction: 'from', date: new Date(2020, 9, 6, 11, 34, 23, 0) }]}\r\n        ]\r\n    };\r\nconst dialogsReducer = (state = initialState, action: DialogsActionsType) => {\r\n    switch (action.type) {\r\n        case 'SEND_MESSAGE' :\r\n            let id = state.dialogs.find(dialog => dialog.userId === action.userId)?.messages.length;\r\n            let newMessage = {\r\n                text: action.newMessageText,\r\n                id: id ? id + 1 : 1,\r\n                direction: 'to',\r\n                date: new Date()\r\n            };\r\n            return {...state,\r\n                        dialogs: state.dialogs.map(dialog => dialog.userId === action.userId ? {...dialog, messages: dialog.messages.concat(newMessage)} : dialog)};\r\n        case 'CREATE_NEW_CHAT':\r\n            return {...state, \r\n                dialogs: state.dialogs.concat({userId: action.userId, messages: []})}\r\n        default: return state;\r\n    }\r\n}\r\n\r\nexport default dialogsReducer;","import React from 'react';\r\nimport Dialogs from './Dialogs';\r\nimport { connect } from 'react-redux';\r\nimport { withAuthRedirect } from '../../hoc/withAuthRedirect';\r\nimport { compose } from 'redux';\r\nimport { reset } from 'redux-form';\r\nimport { RouteComponentProps, withRouter } from 'react-router-dom';\r\nimport { MessageType} from '../../types/types'\r\nimport { AppStateType } from '../../redux/redux-store';\r\nimport { actions } from './../../redux/dialogs-reducer';\r\n\r\n//withRouter props??\r\ntype MapStateToPropsType = ReturnType<typeof mapStateToProps>\r\ntype MapDispatchToPropsType = typeof mapDispatchToProps\r\ntype PropsType = MapDispatchToPropsType & MapStateToPropsType;\r\n\r\nconst DialogsContainer: React.FC<PropsType & RouteComponentProps<{userID?: string}>> = ({createNewChat, history, match, ...props}) => {\r\n    let messages: Array<MessageType> = [];\r\n    let userId = Number(match.params.userID);\r\n    if (!userId && (props.friends.length > 0 && !props.friends.some(friend => friend.id === userId))) {\r\n        history.push('/dialogs/' + (props.dialogs)[0].userId);\r\n    }\r\n    if (!!userId && !props.dialogs.some(dialog => dialog.userId === userId)) {\r\n        createNewChat(userId);\r\n    } else {\r\n    let dialog = props.dialogs.find(dialog => dialog.userId === userId);\r\n    if (!!userId && !!dialog) {\r\n        messages = dialog.messages;\r\n    }\r\n    }\r\n    return <Dialogs userId={userId} messages={messages} {...props}/>\r\n}\r\nconst mapStateToProps = (state: AppStateType) => {\r\n    return {\r\n        dialogs: state.messagesPage.dialogs,\r\n        friends: state.usersPage.friends\r\n    }\r\n}\r\nconst mapDispatchToProps = {sendMessage: actions.sendMessage, createNewChat: actions.createNewChat, reset}\r\nexport default compose<React.ComponentType>(withRouter, connect(mapStateToProps, mapDispatchToProps), withAuthRedirect)(DialogsContainer);","import React from 'react';\r\nimport { reduxForm, Field, InjectedFormProps } from 'redux-form';\r\nimport classes from './EditProfile.module.css';\r\nimport { useState, useEffect } from 'react';\r\nimport { isWebSite } from '../../../common/Form-controls/Form-validators';\r\nimport Preloader from '../../../common/Preloader/Preloader';\r\nimport { Input, Textarea } from '../../../common/Form-controls/Form-controls';\r\nimport { Button } from 'semantic-ui-react';\r\nimport {ProfileType} from '../../../../types/types'\r\nimport { profileFormDataType } from '../ProfileDescription';\r\n\r\n\r\ntype PropsType = {\r\n    profile: ProfileType,\r\n    updatingProfileInProcess: (inProcess: boolean) => void,\r\n    isOwner: boolean,\r\n    updateFetching: boolean\r\n}\r\nconst EditProfile: React.FC<PropsType & InjectedFormProps<profileFormDataType, PropsType>> = ({ profile, updatingProfileInProcess, handleSubmit, isOwner, ...props }) => {\r\n\r\n    let [lookingForAJob, setLookingForAJob] = useState(true);\r\n    useEffect(() => { setLookingForAJob(profile.lookingForAJob) }, [profile.lookingForAJob])\r\n    useEffect(() => {\r\n        !isOwner && updatingProfileInProcess(false);\r\n    }, [isOwner, updatingProfileInProcess])\r\n    let contacts = Object.keys(profile.contacts).map(contact => <div key={contact} className={classes.contact}>\r\n        <Field innerText={contact} name={\"contacts.\" + contact} component={Input} validate={[isWebSite]} /></div>)\r\n\r\n    return (\r\n        <form className={classes.profileForm} onSubmit={handleSubmit}>\r\n            <div>{props.error && props.error}</div>\r\n            <div className={classes.shortInput}><Field innerText=\"Full name\" name=\"fullName\" component={Input} placeholder=\"Your name\" /> </div>\r\n\r\n            <div className={classes.formRow}><span className={classes.semiBold}>Looking for a job: </span>\r\n                <Field className={classes.bigCheckbox} name=\"lookingForAJob\" checked={lookingForAJob} onChange={() => { setLookingForAJob(!lookingForAJob) }}\r\n                    component={Input} type=\"checkbox\" /> </div>\r\n\r\n            <div className={classes.shortInput}><Field disabled={!lookingForAJob} innerText=\"Professional skills\" name=\"lookingForAJobDescription\"\r\n                component={Input} placeholder=\"Your professional skills\" /></div>\r\n\r\n            <div className={classes.aboutMe}><Field innerText=\"About me\" name=\"aboutMe\" component={Textarea} /></div>\r\n            <div><span className={classes.semiBold}>Contacts:</span></div>\r\n            <div className={classes.contacts}>{contacts}</div>\r\n\r\n            <div className={classes.bottomSection}>\r\n                {props.updateFetching\r\n                    ? <Preloader />\r\n                    :\r\n                \r\n            <Button.Group>\r\n                <Button onClick={()=>{updatingProfileInProcess(false)}}>Cancel</Button>\r\n                <Button.Or />\r\n                <Button color='orange' type=\"submit\">Save</Button>\r\n            </Button.Group>}\r\n            </div>\r\n        </form>\r\n    )\r\n}\r\n\r\nexport default reduxForm<profileFormDataType, PropsType>({ form: 'edit-profile' })(EditProfile);","import React from 'react';\r\nimport classes from './ProfileDescription.module.css'\r\nimport cn from 'classnames';\r\nimport { ProfileType } from '../../../types/types';\r\n\r\ntype PropsType = {profile: ProfileType}\r\n\r\nconst About: React.FC<PropsType> = ({profile}) => {\r\n    return (\r\n        <div className={cn(classes.descriptionBlock, classes.about)}>\r\n            <h1 className={classes.title}>Information:</h1>\r\n            {profile.lookingForAJob &&<p className={classes.text}><span className={classes.smallTitle}>Professional skills: </span>{profile.lookingForAJobDescription}</p>}\r\n            <p className={classes.text}><span className={classes.smallTitle}>About me:</span> {profile.aboutMe}</p>\r\n        </div>\r\n    )\r\n}\r\nexport default About;","import React from 'react';\r\nimport classes from './ProfileDescription.module.css'\r\nimport cn from 'classnames';\r\nimport { getRandomArr } from '../../../Utils/Array-changers';\r\nimport Friend from '../../Navbar/FriendsList/Friend/Friend';\r\nimport { connect } from 'react-redux';\r\nimport { UserType } from '../../../types/types';\r\nimport { AppStateType } from '../../../redux/redux-store';\r\n\r\ntype PropsType = {friends: Array<UserType>};\r\n\r\nconst Friends: React.FC<PropsType> = ({friends}) => {\r\n    let randomFriends: Array<UserType> = getRandomArr(friends, 8);\r\n    let friendsArr = randomFriends.map(friend => {\r\n    return <Friend photo={friend.photos.small} key={friend.id} id = {friend.id}><div>{friend.name}</div></Friend>\r\n    })\r\n    return (\r\n        <div className={cn(classes.descriptionBlock, classes.friends)} id=\"friends\">\r\n            <h1 className={classes.title}>Friends:</h1>\r\n            <div className={classes.friendsBlock}>\r\n                {friendsArr}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\nexport default connect((state: AppStateType) => ({friends: state.usersPage.friends}))(Friends);","import { getPhotosForAlbum } from '../api/api';\r\nimport {ActionsType, AlbumPhotoType, BaseThunkType} from './../types/types'\r\n\r\n\r\nconst initialState = {\r\n    photos: [] as Array<AlbumPhotoType>,\r\n    numberOfPhotos: 12,\r\n    isFetching: false\r\n}\r\ntype initialStateType = typeof initialState;\r\ntype ThunkType = BaseThunkType<AlbumActionsType>\r\ntype AlbumActionsType = ActionsType<typeof actions>\r\n\r\nconst actions = {\r\n    setPhotos : (photos: Array<AlbumPhotoType>) => ({type: 'SET_PHOTOS', photos} as const),\r\n    toggleFetching : (isFetching: boolean) => ({type: 'TOGGLE_FETCHING', isFetching} as const)\r\n}\r\n\r\n\r\nexport const albumReducer = (state = initialState, action: AlbumActionsType) : initialStateType => {\r\n    switch (action.type) {\r\n        case 'SET_PHOTOS' :\r\n            return ({...state, photos: action.photos})\r\n        case 'TOGGLE_FETCHING' :\r\n            return ({...state, isFetching: action.isFetching})\r\n        default: return state\r\n    }\r\n}\r\n\r\nexport const getPhotos = (numberOfPhotos: number, page: number): ThunkType => {\r\n    return async (dispatch) => {\r\n        dispatch(actions.toggleFetching(true));\r\n        let photos = await getPhotosForAlbum(numberOfPhotos, page);\r\n        dispatch(actions.setPhotos(photos));\r\n        dispatch(actions.toggleFetching(false));\r\n    }\r\n}","import React from 'react'\r\nimport { Modal, Image } from 'semantic-ui-react';\r\nimport classes from './ProfileDescription.module.css';\r\n\r\ntype PropsType = {\r\n  thumbnail: string,\r\n  photo: string\r\n}\r\nconst Photo: React.FC<PropsType> = ({thumbnail, photo}) => {\r\n  const [open, setOpen] = React.useState(false)\r\n\r\n  return (\r\n    <Modal\r\n    size=\"large\"\r\n    closeIcon\r\n    dimmer=\"blurring\"\r\n    basic\r\n      open={open}\r\n      trigger={<img className={classes.photo} src={thumbnail} alt=''/>}\r\n      onClose={() => setOpen(false)}\r\n      onOpen={() => setOpen(true)}\r\n    >\r\n      <Modal.Content>\r\n        <Image src={photo} className={classes.fullscreenPhoto}/>\r\n      </Modal.Content>\r\n    </Modal>\r\n  )\r\n}\r\n\r\nexport default Photo\r\n","import React from 'react';\r\nimport classes from './ProfileDescription.module.css';\r\nimport cn from 'classnames';\r\nimport { connect } from 'react-redux';\r\nimport {getPhotos} from '../../../redux/album-reducer'\r\nimport Photo from './Photo';\r\nimport Preloader from '../../common/Preloader/Preloader';\r\nimport { AlbumPhotoType } from '../../../types/types';\r\nimport { AppStateType } from '../../../redux/redux-store';\r\n\r\ntype PropsType = {\r\n    getPhotos: (numberOfPhotos: number, page: number) => void,\r\n    isFetching: boolean,\r\n    photos: Array<AlbumPhotoType>,\r\n    numberOfPhotos: number,\r\n    userId: number\r\n}\r\nclass Photos extends React.Component<PropsType> {\r\n    \r\n    componentDidMount() {\r\n        this.props.getPhotos(this.props.numberOfPhotos, this.props.userId % 10 + 1);\r\n    }\r\n    \r\n    render () {\r\n        return (\r\n        <div className={cn(classes.descriptionBlock, classes.photos)}>\r\n            <h1 className={classes.title}>Album:</h1>\r\n            {\r\n            this.props.isFetching\r\n            ? \r\n            <Preloader /> \r\n            : \r\n            <div className={classes.photosBlock}>{this.props.photos.map((photo, index) => <Photo thumbnail={photo.src.tiny}\r\n                photo={photo.src.large} key={index}/>)}</div>\r\n            }\r\n        </div>)\r\n        }\r\n}\r\nconst mapStateToProps = (state: AppStateType) => ({\r\n    photos: state.album.photos, \r\n    numberOfPhotos: state.album.numberOfPhotos, \r\n    isFetching: state.album.isFetching\r\n})\r\n\r\nexport default connect(mapStateToProps, {getPhotos})(Photos);","import React from 'react';\r\nimport classes from './ProfileDescription.module.css';\r\nimport cn from 'classnames';\r\nimport { Button, Icon } from 'semantic-ui-react';\r\nimport { ContactsOption, ContactsType } from '../../../types/types';\r\n\r\ntype PropsType = {\r\n    contacts: ContactsType\r\n}\r\nconst Contacts: React.FC<PropsType> = ({contacts}) => {\r\n    let mappedContacts: Array<ContactsOption> = Object.keys(contacts) as Array<ContactsOption>;\r\n    let profileContacts = mappedContacts.map(\r\n        (contact) => { \r\n            if (contacts[contact]) {\r\n                switch (contact) {\r\n                    case ('website') : \r\n                    case ('mainLink') :\r\n                    case ('github') :\r\n                return <Button href={contacts[contact]} target='blank' color='yellow' key={contact}>\r\n                            <Icon name='github' /> {contact}\r\n                        </Button>\r\n                default: return <Button href={contacts[contact]} target='blank' color={contact} key={contact}>\r\n                <Icon name={contact} /> {contact}\r\n            </Button>}}\r\n        })\r\n    return (\r\n        <div id=\"contacts\" className={cn(classes.descriptionBlock, classes.contacts)}>\r\n            <h1 className={classes.title}>Contacts:</h1>\r\n                <Button.Group vertical widths='4'>\r\n                    {profileContacts}\r\n                </Button.Group>\r\n        </div>\r\n    )\r\n}\r\nexport default Contacts;","import React from 'react'\r\nimport { Dropdown, Icon } from 'semantic-ui-react'\r\nimport classes from '../../ProfileDescription.module.css'\r\n\r\ntype PropsType = {\r\n  deletePost: (postId: number) => void,\r\n  postId: number\r\n}\r\nconst PostDropdownMenu: React.FC<PropsType> = ({deletePost, postId}) => {\r\n    const trigger = (\r\n        <span className={classes.dropdown}>\r\n          <Icon name=\"ellipsis horizontal\"/>\r\n        </span>\r\n      )\r\n      \r\n      const options = [\r\n        { key: 'delete', icon: 'trash alternate', onClick: () => {deletePost(postId)}, content: (<span className={classes.option}>Delete post</span>) }\r\n      ]\r\n\r\n    return (\r\n        <Dropdown pointing='top right' trigger={trigger} options={options} className={classes.menuContainer} icon={null}/>\r\n    )\r\n}\r\n  \r\n\r\nexport default PostDropdownMenu;","import React from 'react';\r\nimport classes from '../../ProfileDescription.module.css';\r\nimport defaultPicture from '../../../../../images/user-logo.png';\r\nimport cn from 'classnames';\r\nimport PostDropdownMenu from './PostDropdownMenu';\r\nimport { Icon, Button, Label } from 'semantic-ui-react';\r\nimport { useState } from 'react';\r\n\r\ntype PropsType = {\r\n    photo: string | null,\r\n    name: string,\r\n    date: Date,\r\n    isOwner: boolean,\r\n    text: string,\r\n    likesCount: number,\r\n    deletePost: (postId: number) => void,\r\n    postId: number,\r\n    likePost: (postId: number) => void\r\n}\r\nconst Post: React.FC<PropsType> = ({photo, name, date, isOwner, text, likesCount, deletePost, postId, likePost}) => {\r\n    let [liked, setLiked] = useState(false);\r\n    return (\r\n        <div className={cn(classes.post, classes.descriptionBlock)}>\r\n            <div className={classes.postHeader}>\r\n                <div className={classes.author}>\r\n                    <img className={classes.user} src={photo || defaultPicture} alt=\"\"/>\r\n                    <div>\r\n                        <p className={classes.userName}>{name}</p>\r\n                        <p className={classes.date}>{date.toDateString()}</p>\r\n                    </div>\r\n                </div>\r\n                {isOwner && <PostDropdownMenu deletePost={deletePost} postId={postId}/>}\r\n            </div>\r\n            <div className={classes.postText}>\r\n               {text}\r\n            </div>\r\n            <div className={classes.postInfo}>\r\n                <div>\r\n                    <Button circular color='facebook' icon='facebook' target='blank'\r\n                    href={'http://www.facebook.com/sharer.php?s=100&p[summary]=' + encodeURIComponent(text)}/>\r\n                    <Button circular color='twitter' icon='twitter' target='blank'\r\n                    href={'http://twitter.com/share?text=' + encodeURIComponent(text)}/>\r\n                    <Button circular color='vk' icon='vk' target='blank'\r\n                    href={'http://vkontakte.ru/share.php?description=' + encodeURIComponent(text)}/>\r\n                </div>\r\n                <div className={classes.likes}>\r\n                    <Button as='div' labelPosition='right'>\r\n                        <Button basic={liked} color='red' onClick={() => {likePost(postId); setLiked(true)}}>\r\n                            <Icon name='heart' />\r\n                            {liked ? 'Liked' : 'Like'}\r\n                        </Button>\r\n                        <Label as='a' basic color='red' pointing='left'>\r\n                            {likesCount}\r\n                        </Label>\r\n                    </Button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Post;","import React from 'react';\r\nimport classes from '../../ProfileDescription.module.css';\r\nimport { Field, reduxForm, InjectedFormProps } from 'redux-form';\r\nimport { maxLength } from '../../../../common/Form-controls/Form-validators';\r\nimport { Textarea } from '../../../../common/Form-controls/Form-controls';\r\nimport cn from 'classnames';\r\nimport { Button } from 'semantic-ui-react';\r\nimport { NewPostTextType } from '../Posts';\r\n\r\nconst maxLength500 = maxLength(500);\r\n\r\nconst NewPost: React.FC<InjectedFormProps<NewPostTextType>> = ({handleSubmit, dirty}) => {\r\n    return (\r\n        <form onSubmit={handleSubmit} className={cn(classes.newPost, classes.descriptionBlock)}>\r\n            <Field component={Textarea} name=\"newPostText\" validate={[maxLength500]} \r\n            innerText = \"Write new post here\"/>\r\n            <Button disabled={!dirty} color='orange' type=\"submit\">Send</Button>\r\n        </form>\r\n    )\r\n}\r\nexport default reduxForm<NewPostTextType>({form: \"newPost\"})(NewPost);","import React from 'react';\r\nimport Post from './Post/Post';\r\nimport NewPost from './NewPost/NewPost';\r\nimport cn from 'classnames';\r\nimport classes from '../ProfileDescription.module.css'\r\nimport { PostType } from '../../../../types/types';\r\n\r\n\r\ntype PropsType = {\r\n    addPost: (text: string) => void,\r\n    deletePost: (postId: number) => void,\r\n    reset: (form: string) => void,\r\n    posts: Array<PostType>,\r\n    likePost: (postId: number) => void,\r\n    name: string,\r\n    isOwner: boolean,\r\n    photo: string | null\r\n}\r\nexport type NewPostTextType = {newPostText: string}\r\n\r\nconst Posts: React.FC<PropsType> = ({addPost, deletePost, reset, posts, likePost, ...props}) => {\r\n    let postsList = posts.map(post => <Post  likePost={likePost} key={post.id} isOwner = {props.isOwner} date={post.date} postId={post.id}\r\n        name ={props.name} text={post.message} likesCount={post.likesCount} photo={props.photo ? props.photo : null} deletePost={deletePost}/>);\r\n    postsList.reverse();\r\n    return (\r\n        <div className={cn(classes.myPosts, classes.posts)} id=\"posts\">\r\n            {!!props.isOwner && <NewPost onSubmit={(data: NewPostTextType) => {addPost(data.newPostText); reset('newPost')}}/>}\r\n            {postsList}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Posts;","import React from 'react';\r\nimport classes from './ProfileDescription.module.css';\r\nimport EditProfile from './EditProfile/EditProfile';\r\nimport About from './About';\r\nimport Friends from './Friends';\r\nimport Photos from './Photos';\r\nimport Contacts from './Contacts';\r\nimport Posts from './Posts/Posts';\r\nimport { ContactsType, PostType, ProfileType } from '../../../types/types';\r\n\r\ntype PropsType = {\r\n    profile: ProfileType,\r\n    isOwner: boolean,\r\n    updatingProfile: boolean,\r\n    updatingProfileInProcess: (isInProcess: boolean) => void,\r\n    updateProfile: (formData: profileFormDataType) => void,\r\n    updateFetching: boolean,\r\n    posts: Array<PostType>,\r\n    addPost: (text: string) => void,\r\n    deletePost: (postId: number) => void,\r\n    reset: (formName: string) => void,\r\n    likePost: (postId: number) => void\r\n}\r\nexport type profileFormDataType = {\r\n    fullName: string\r\n    lookingForAJob: boolean\r\n    lookingForAJobDescription: string\r\n    aboutMe: string\r\n    contacts: ContactsType\r\n}\r\nconst ProfileDescription: React.FC<PropsType> = ({ profile, isOwner, updatingProfile, updatingProfileInProcess, \r\n    updateProfile, updateFetching, posts, addPost, deletePost, reset, likePost }) => {\r\n    const {photos, userId, ...initialValues} = profile \r\n    return (\r\n        !updatingProfile ?\r\n            <div className={classes.description}>\r\n\r\n                <div>\r\n                    <About profile={profile}/>\r\n                    <Friends />\r\n                </div>\r\n                <Posts isOwner ={isOwner} photo={photos.small} reset = {reset} posts ={posts}\r\n                addPost={addPost} deletePost={deletePost} name={profile.fullName} likePost={likePost}/>\r\n                <div>\r\n                    <Photos userId={userId}/>\r\n                    <Contacts contacts={profile.contacts}/>\r\n                </div>\r\n            </div>\r\n        :\r\n            <EditProfile \r\n                initialValues={initialValues}\r\n                profile={profile}\r\n                updateFetching={updateFetching}\r\n                updatingProfileInProcess={updatingProfileInProcess}\r\n                isOwner={isOwner}\r\n                onSubmit={(formData: profileFormDataType) => {updateProfile(formData)}}\r\n            />\r\n    )\r\n}\r\n\r\nexport default ProfileDescription;","import React from 'react';\r\nimport { useState } from 'react';\r\nimport { Button } from 'semantic-ui-react';\r\nimport classes from '../Profile.module.css';\r\nimport { NavLink } from 'react-router-dom';\r\nimport { Link} from \"react-scroll\";\r\nimport { UserType } from '../../../types/types';\r\n\r\ntype PropsType = {\r\n    isOwner: boolean,\r\n    updatingProfileInProcess: (isInProcess: boolean) => void,\r\n    friends: Array<UserType>,\r\n    follow: (userId: number) => void,\r\n    unfollow: (userId: number) => void,\r\n    followingUsers: Array<number>,\r\n    userId: number\r\n}\r\nconst ProfileMenuBar: React.FC<PropsType> = ({isOwner, updatingProfileInProcess, friends, follow, unfollow, followingUsers, userId}) => {\r\n    let followed = friends.some(friend => friend.id === Number(userId));\r\n    let [pushed, setPushed] = useState(false)\r\n    let followingInProgress = false;\r\n    followingInProgress = followingUsers.some(user => user === userId) ? true : false;\r\n    return (\r\n        <div className={classes.profileMenuBar}>\r\n            <Link to=\"about\" smooth={true} offset={100} duration={500}>\r\n                <div className={classes.profileMenuOption}>About</div>\r\n            </Link>\r\n\r\n            <Link to=\"posts\" smooth={true} offset={100} duration={500}>\r\n                <div className={classes.profileMenuOption}>Posts</div>\r\n            </Link>\r\n\r\n            <div className={classes.divider}></div>\r\n\r\n            <Link to=\"friends\" smooth={true} offset={-30} duration= {500}>\r\n                <div className={classes.profileMenuOption}>Friends</div>\r\n            </Link>\r\n\r\n            <Link to=\"contacts\" smooth={true} offset={-30} duration= {500}>\r\n                <div className={classes.profileMenuOption}>Contacts</div>\r\n            </Link>\r\n\r\n            <div className={classes.actionButtons}>\r\n                {isOwner \r\n                ? <Button size='huge' circular icon='pencil alternate'\r\n                onClick={() => { updatingProfileInProcess(true) }} color='orange'/>\r\n                : followed ? <>\r\n                    <NavLink to={'/dialogs/' + userId}>\r\n                        <Button disabled={!followed} size='huge' circular icon='paper plane outline' color='purple'/>\r\n                    </NavLink>\r\n                \r\n                    <Button size='huge' loading={followingInProgress} disabled={pushed}\r\n                    onClick={()=>{unfollow(userId); setPushed(true);}} circular icon={pushed ? 'check': 'remove user'} color='pink'/>\r\n                    </>\r\n                    :\r\n                    <>\r\n                    <Button disabled={!followed} size='huge' circular icon='paper plane outline' color='purple'/>\r\n                    <Button size='huge' loading={followingInProgress} disabled={pushed} \r\n                    onClick={()=>{follow(userId); setPushed(true);}} circular icon={pushed ? 'check': 'add user'} color='green'/>\r\n                    </>\r\n                }\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ProfileMenuBar","import React, { ChangeEvent } from 'react';\r\nimport { useEffect } from 'react';\r\nimport { useState } from 'react';\r\nimport classes from '../../Profile.module.css';\r\n\r\ntype PropsType = {\r\n    status: string,\r\n    updateStatus: (status: string) => void,\r\n    isOwner: boolean\r\n}\r\nconst ProfileStatus: React.FC<PropsType> = (props) => {\r\n    \r\n    let [editMode, setEditMode] = useState (false);\r\n    let [status, setStatus] = useState (props.status);\r\n\r\n    useEffect(() => {\r\n        setStatus(props.status)\r\n    }, [props.status]);\r\n    const onEditMode = () => {\r\n        setEditMode(true);\r\n    }\r\n    const offEditMode = () => {\r\n        setEditMode(false);\r\n        props.updateStatus(status);\r\n    }\r\n    const changeStatus = (text: ChangeEvent<HTMLInputElement>) => {\r\n        setStatus (text.currentTarget.value);\r\n    }\r\n    return (\r\n        <div className={classes.status}>\r\n            {editMode &&\r\n                <input autoFocus = {true} type=\"text\" value={status}\r\n                    onBlur={() => { offEditMode() }} onChange={(e) => { changeStatus(e) }} />}\r\n                {!editMode &&\r\n                    <span onClick={() => {props.isOwner && onEditMode() }}>{props.status || 'No status yet'}</span>}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ProfileStatus;","import React from 'react';\r\nimport classes from '../Profile.module.css';\r\nimport { Icon } from 'semantic-ui-react';\r\nimport user_logo from '../../../images/person-male.png';\r\nimport photoIcon from '../../../images/photo-icon.png';\r\nimport cn from 'classnames';\r\nimport { ProfileType } from '../../../types/types';\r\n\r\ntype PropsType = {\r\n    uploadingPhoto: boolean,\r\n    profile: ProfileType,\r\n    isOwner: boolean,\r\n    savePhoto: (photo: File) => void\r\n}\r\nconst ProfilePhoto: React.FC<PropsType> = ({uploadingPhoto, profile, isOwner, savePhoto}) => {\r\n    return (\r\n        <>\r\n                <img id=\"about\" className={cn(classes.ava, uploadingPhoto && classes.bluredPhoto)} src={profile.photos.large || user_logo} alt=\"user avatar\" />\r\n                {isOwner &&\r\n                    <label>\r\n                        <Icon src={photoIcon} name=\"photo\" className={classes.photoIcon} />\r\n                        <input type=\"file\" onChange={(e) => { if (e.target.files) {savePhoto(e.target.files[0])} }} className={classes.invisibleInput} />\r\n                    </label>}\r\n        </>\r\n    )\r\n}\r\nexport default ProfilePhoto;","import React from 'react';\r\nimport classes from '../Profile.module.css';\r\nimport { wallpapers } from '../wallpapers';\r\nimport ProfileStatus from './ProfileStatus/ProfileStatus-hook';\r\nimport ProfilePhoto from './ProfilePhoto';\r\nimport { ProfileType, UserType } from '../../../types/types';\r\n\r\ntype PropsType = {\r\n    uploadingPhoto: boolean\r\n    isOwner: boolean\r\n    savePhoto: (photo: File) => void\r\n    profile: ProfileType\r\n    status: string\r\n    updateStatus: (status: string) => void\r\n    updatingProfileInProcess: (isInProcess: boolean) => void\r\n    follow: (userId: number) => void \r\n    unfollow: (userId: number) => void \r\n    followingUsers: Array<number>\r\n    friends: Array<UserType>\r\n}\r\nconst ProfileTitle: React.FC<PropsType> = ({isOwner, profile, status, updateStatus, ...restProps}) => {\r\n    return (\r\n        <>\r\n            <img className={classes.wallpaper} src={wallpapers[profile.userId % 10]} alt=\"\" />\r\n            <div className={classes.userPreview} >\r\n                <ProfilePhoto profile={profile} isOwner={isOwner} {...restProps}/>\r\n                <h1 className={classes.fullName}>{profile.fullName}</h1>\r\n                <ProfileStatus status={status} updateStatus={updateStatus} isOwner={isOwner} />\r\n            </div>\r\n        </>\r\n    )\r\n}\r\nexport default ProfileTitle;","import React from 'react';\r\nimport { ProfileType, UserType } from '../../../types/types';\r\nimport classes from '../Profile.module.css';\r\nimport ProfileMenuBar from './ProfileMenuBar';\r\nimport ProfileTitle from './ProfileTitle';\r\n\r\ntype PropsType = {\r\n    uploadingPhoto: boolean\r\n    isOwner: boolean\r\n    savePhoto: (photo: File) => void\r\n    profile: ProfileType\r\n    status: string\r\n    updateStatus: (status: string) => void\r\n    updatingProfileInProcess: (isInProcess: boolean) => void\r\n    follow: (userId: number) => void \r\n    unfollow: (userId: number) => void \r\n    followingUsers: Array<number>\r\n    friends: Array<UserType>\r\n}\r\nconst ProfileHeader: React.FC<PropsType> = (props) => {\r\n    return (\r\n        <div className={classes.profileHeader}>\r\n            <ProfileTitle {...props}/>\r\n            <ProfileMenuBar isOwner={props.isOwner} updatingProfileInProcess={props.updatingProfileInProcess}\r\n            follow={props.follow}\r\n            unfollow={props.unfollow}\r\n            followingUsers={props.followingUsers}\r\n            friends={props.friends}\r\n            userId={props.profile.userId}/>\r\n        </div>\r\n    )\r\n}\r\nexport default ProfileHeader;","import React from 'react';\r\nimport ProfileDescription from './ProfileDescription/ProfileDescription';\r\nimport classes from './Profile.module.css';\r\nimport ProfileHeader from './ProfileHeader/ProfileHeader';\r\nimport { PostType, ProfileType, UserType } from '../../types/types';\r\n\r\ntype PropsType = {\r\n    uploadingPhoto: boolean\r\n    isOwner: boolean\r\n    savePhoto: (photo: File) => void\r\n    profile: ProfileType\r\n    status: string\r\n    updateStatus: (status: string) => void\r\n    updatingProfileInProcess: (isInProcess: boolean) => void\r\n    follow: (userId: number) => void \r\n    unfollow: (userId: number) => void \r\n    followingUsers: Array<number>\r\n    friends: Array<UserType>\r\n    getProfileWithStatus: (userId: number) => void,\r\n    me: number,\r\n    isFetching: boolean,\r\n    updatingProfile: boolean,\r\n    updateProfile: (formData: object) => void,\r\n    updateFetching: boolean,\r\n    posts: Array<PostType>,\r\n    addPost: (text: string) => void,\r\n    deletePost: (postId: number) => void,\r\n    reset: (formName: string) => void,\r\n    likePost: (postId: number) => void\r\n}\r\n\r\nconst Profile: React.FC<PropsType> = ({ profile, uploadingPhoto, savePhoto, status, updateStatus, follow, unfollow, friends, followingUsers, ...props }) => {\r\n    return (\r\n        <div className={classes.info}>\r\n            <ProfileHeader uploadingPhoto={uploadingPhoto}\r\n            isOwner={props.isOwner}\r\n            savePhoto={savePhoto}\r\n            profile={profile}\r\n            status={status}\r\n            updateStatus={updateStatus} \r\n            updatingProfileInProcess = {props.updatingProfileInProcess}\r\n            follow={follow}\r\n            unfollow={unfollow}\r\n            followingUsers={followingUsers}\r\n            friends={friends}/>\r\n\r\n            <ProfileDescription profile={profile} {...props}/>\r\n        </div>\r\n\r\n    )\r\n}\r\n\r\n\r\nexport default Profile;","import { profileAPI, ResultCodes } from '../api/api';\r\nimport { stopSubmit } from 'redux-form';\r\nimport { ActionsType, PhotoType, PostType, ProfileType } from \"../types/types\";\r\nimport { Dispatch } from 'redux';\r\nimport { ThunkAction } from 'redux-thunk';\r\nimport { AppStateType } from './redux-store';\r\nimport { profileFormDataType } from '../components/Profile/ProfileDescription/ProfileDescription';\r\n\r\nexport const profileActions = {\r\n    deletePost : (id: number) => ({ type: 'DELETE_POST', id } as const),\r\n    addPost : (text: string) => ({ type: 'ADD_POST', text } as const),\r\n    likePost : (id: number) => ({ type: 'LIKE_POST', id } as const),\r\n    setProfile : (profile: ProfileType) => ({ type: 'SET_PROFILE', profile } as const),\r\n    setStatus : (status: string) => ({ type: 'SET_STATUS', status } as const),\r\n    setPhoto : (photos: PhotoType) => ({ type: 'SET_PHOTO', photos } as const),\r\n    togglePreloader : (isFetching: boolean) => ({ type: 'TOGGLE_IS_FETCHING', payload: {isFetching} } as const),\r\n    toggleUploading : () => ({ type: 'TOGGLE_UPLOADING' } as const),\r\n    toggleUpdating : (isFetching: boolean) => ({ type: 'TOGGLE_UPDATING', isFetching } as const),\r\n    updatingProfileInProcess : (updating:boolean) => ({ type: 'UPDATING_PROFILE', updating } as const)\r\n}\r\ntype ProfileActionsType = ActionsType<typeof profileActions>\r\nconst initialState = {\r\n    profile: null as ProfileType | null,\r\n    status: '',\r\n    //Hardcoded posts\r\n    posts:\r\n        [{ message: \"Hooks don’t replace your knowledge of React concepts. Instead, Hooks provide a more direct API to the React concepts you already know: props, state, context, refs, and lifecycle. As we will show later, Hooks also offer a new powerful way to combine them.\", id: 1, likesCount: 16, date: new Date(2020, 1, 1) },\r\n        { message: \"Hooks solve a wide variety of seemingly unconnected problems in React that we’ve encountered over five years of writing and maintaining tens of thousands of components. Whether you’re learning React, use it daily, or even prefer a different library with a similar component model, you might recognize some of these problems.\", id: 2, likesCount: 15, date: new Date(2020, 3, 24) },\r\n        { message: \"React doesn’t offer a way to “attach” reusable behavior to a component (for example, connecting it to a store). If you’ve worked with React for a while, you may be familiar with patterns like render props and higher-order components that try to solve this. But these patterns require you to restructure your components when you use them, which can be cumbersome and make code harder to follow. If you look at a typical React application in React DevTools, you will likely find a “wrapper hell” of components surrounded by layers of providers, consumers, higher-order components, render props, and other abstractions. While we could filter them out in DevTools, this points to a deeper underlying problem: React needs a better primitive for sharing stateful logic.\", id: 3, likesCount: 10, date: new Date(2020, 6, 12) },\r\n        { message: \"We’ve often had to maintain components that started out simple but grew into an unmanageable mess of stateful logic and side effects. Each lifecycle method often contains a mix of unrelated logic. For example, components might perform some data fetching in componentDidMount and componentDidUpdate. However, the same componentDidMount method might also contain some unrelated logic that sets up event listeners, with cleanup performed in componentWillUnmount. Mutually related code that changes together gets split apart, but completely unrelated code ends up combined in a single method. This makes it too easy to introduce bugs and inconsistencies.\", id: 4, likesCount: 8, date: new Date(2020, 7, 7) },\r\n        { message: \"In addition to making code reuse and code organization more difficult, we’ve found that classes can be a large barrier to learning React. You have to understand how this works in JavaScript, which is very different from how it works in most languages. You have to remember to bind the event handlers. Without unstable syntax proposals, the code is very verbose. People can understand props, state, and top-down data flow perfectly well but still struggle with classes. The distinction between function and class components in React and when to use each one leads to disagreements even between experienced React developers.\", id: 5, likesCount: 15, date: new Date(2020, 7, 11) },\r\n        { message: \"Additionally, React has been out for about five years, and we want to make sure it stays relevant in the next five years. As Svelte, Angular, Glimmer, and others show, ahead-of-time compilation of components has a lot of future potential. Especially if it’s not limited to templates. Recently, we’ve been experimenting with component folding using Prepack, and we’ve seen promising early results. However, we found that class components can encourage unintentional patterns that make these optimizations fall back to a slower path. Classes present issues for today’s tools, too. For example, classes don’t minify very well, and they make hot reloading flaky and unreliable. We want to present an API that makes it more likely for code to stay on the optimizable path.\", id: 6, likesCount: 20, date: new Date(2020, 8, 12) },\r\n        { message: \"Conceptually, React components have always been closer to functions. Hooks embrace functions, but without sacrificing the practical spirit of React. Hooks provide access to imperative escape hatches and don’t require you to learn complex functional or reactive programming techniques.\", id: 7, likesCount: 13, date: new Date(2020, 9, 12) },\r\n        ] as Array<PostType>,\r\n    isFetching: false,\r\n    uploadingPhoto: false,\r\n    updatingProfile: false,\r\n    updateFetching: false\r\n};\r\nexport type InitialStateType = typeof initialState;\r\nconst profileReducer = (state = initialState, action: ProfileActionsType): InitialStateType => {\r\n    switch (action.type) {\r\n        case 'ADD_POST':\r\n            let newPost = {\r\n                message: action.text, id: state.posts[state.posts.length - 1].id + 1, likesCount: 0, date: new Date()\r\n            }\r\n            return {\r\n                ...state,\r\n                posts: [...state.posts, newPost]\r\n            };\r\n        case 'DELETE_POST':\r\n            return { ...state, posts: state.posts.filter(post => post.id !== action.id) }\r\n        case 'SET_PROFILE':\r\n            return {\r\n                ...state,\r\n                profile: action.profile\r\n            };\r\n        case 'LIKE_POST':\r\n            return {\r\n                ...state,\r\n                posts: state.posts.map(post => {\r\n                    post.id === action.id && post.likesCount++;\r\n                    return post;\r\n                })\r\n            };\r\n        case 'SET_PHOTO':\r\n            return state.profile !== null ? { ...state, profile: {...state.profile, photos: action.photos}} : state;             \r\n        case 'SET_STATUS':\r\n            return {\r\n                ...state,\r\n                status: action.status\r\n            };\r\n        case 'TOGGLE_IS_FETCHING':\r\n            return {\r\n                ...state,\r\n                ...action.payload}\r\n            ;\r\n        case 'TOGGLE_UPLOADING':\r\n            return {\r\n                ...state,\r\n                uploadingPhoto: !state.uploadingPhoto\r\n            };\r\n        case 'TOGGLE_UPDATING':\r\n            return {\r\n                ...state,\r\n                updateFetching: action.isFetching\r\n            };\r\n        case 'UPDATING_PROFILE':\r\n            return {\r\n                ...state,\r\n                updatingProfile: action.updating\r\n            };\r\n        default: return state;\r\n    }\r\n}\r\n\r\nexport const getProfileWithStatus = (profileId: number): ThunkAction<Promise<void>, AppStateType, unknown, ProfileActionsType> => {\r\n    return async (dispatch) => {\r\n        dispatch(profileActions.togglePreloader(true));\r\n        await dispatch(getProfile(profileId));\r\n        await dispatch(getStatus(profileId));\r\n        dispatch(profileActions.togglePreloader(false));\r\n    }\r\n}\r\nexport const getProfile = (profileId: number) => {\r\n    return async (dispatch: Dispatch<ProfileActionsType>) => {\r\n        let data = await profileAPI.getProfile(profileId);\r\n        dispatch(profileActions.setProfile(data));\r\n    }\r\n}\r\nexport const getStatus = (profileId: number) => {\r\n    return async (dispatch: Dispatch<ProfileActionsType>) => {\r\n        let data = await profileAPI.getStatus(profileId);\r\n        dispatch(profileActions.setStatus(data));\r\n    }\r\n}\r\nexport const updateStatus = (status: string): ThunkAction<Promise<void>, AppStateType, unknown, ProfileActionsType> => {\r\n    return async (dispatch) => {\r\n        let data = await profileAPI.updateStatus(status)\r\n        if (data.resultCode === ResultCodes.Success) {\r\n            dispatch(profileActions.setStatus(status));\r\n        }\r\n    }\r\n}\r\nexport const savePhoto = (photoFile: File) => {\r\n    return async (dispatch: Dispatch<ProfileActionsType>) => {\r\n        dispatch(profileActions.toggleUploading());\r\n        let response = await profileAPI.uploadPhoto(photoFile);\r\n        if (response.resultCode === ResultCodes.Success) dispatch(profileActions.setPhoto(response.data.photos));\r\n        dispatch(profileActions.toggleUploading());\r\n    }\r\n}\r\nexport const updateProfile = (data: profileFormDataType): ThunkAction<Promise<void>, AppStateType, unknown, ProfileActionsType> => {\r\n    type ErrorsObjectType = {[key: string]: string};\r\n    const parseErrorObject = (errors: Array<string>) => {\r\n        let errorsObject: ErrorsObjectType = {};\r\n        errors.forEach((error) => {\r\n            let element = '';\r\n            let message = '';\r\n            let errorInArray = error.split(' ');\r\n            let lastElement = errorInArray[errorInArray.length - 1];\r\n            if (lastElement.search(/->/) > 0) {\r\n                element = lastElement.slice(lastElement.search(/->/) + 2, -1)\r\n                element = 'contacts.' + element[0].toLowerCase() + element.substring(1);\r\n            } else {\r\n                element = lastElement.slice(1, -1);\r\n                element = element[0].toLowerCase() + element.substring(1);\r\n            }\r\n            message = error.split('(')[0];\r\n            errorsObject[element] = message;\r\n        })\r\n        return errorsObject;\r\n    }\r\n    return async (dispatch, getState) => {\r\n        const me = getState().profilePage.profile?.userId;\r\n        dispatch(profileActions.toggleUpdating(true));\r\n        let response = await profileAPI.setProfile(data);\r\n        if (response.resultCode === ResultCodes.Success) {\r\n            if (me) await dispatch(getProfile(me));\r\n            dispatch(profileActions.updatingProfileInProcess(false))\r\n        } else {\r\n            dispatch(stopSubmit('edit-profile', parseErrorObject(response.messages)))\r\n        }\r\n        dispatch(profileActions.toggleUpdating(false));\r\n    }\r\n}\r\nexport default profileReducer;","import React from 'react';\r\nimport Profile from './Profile';\r\nimport { getProfileWithStatus, updateStatus, savePhoto } from '../../redux/profile-reducer';\r\nimport { RouteComponentProps, withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { compose } from 'redux';\r\nimport { reset } from 'redux-form';\r\nimport { withAuthRedirect } from '../../hoc/withAuthRedirect';\r\nimport { follow, unfollow } from '../../redux/users-reducer';\r\nimport { PostType, ProfileType, UserType } from '../../types/types';\r\nimport Preloader from '../common/Preloader/Preloader';\r\nimport { AppStateType } from '../../redux/redux-store';\r\nimport { profileActions, updateProfile } from './../../redux/profile-reducer';\r\n\r\ntype ProfileContainerPropsType = {\r\n    uploadingPhoto: boolean\r\n    savePhoto: (photo: File) => void\r\n    profile: ProfileType\r\n    status: string\r\n    updateStatus: (status: string) => void\r\n    updatingProfileInProcess: (isInProcess: boolean) => void\r\n    follow: (userId: number) => void \r\n    unfollow: (userId: number) => void \r\n    followingUsers: Array<number>\r\n    friends: Array<UserType>\r\n    getProfileWithStatus: (userId: number) => void,\r\n    me: number,\r\n    isFetching: boolean,\r\n    updatingProfile: boolean,\r\n    updateProfile: (formData: object) => void,\r\n    updateFetching: boolean,\r\n    posts: Array<PostType>,\r\n    addPost: (text: string) => void,\r\n    deletePost: (postId: number) => void,\r\n    reset: (formName: string) => void,\r\n    likePost: (postId: number) => void\r\n}\r\nclass ProfileContainer extends React.Component<RouteComponentProps<{userID?: string}> & ProfileContainerPropsType> {\r\n    \r\n    isOwner = false;\r\n    \r\n    refreshProfile () {\r\n        let userId = Number(this.props.match.params.userID) || this.props.me;\r\n        !userId && this.props.history.push('/login');\r\n        if (userId === this.props.me) {\r\n            this.isOwner = true;\r\n        } else {\r\n            this.isOwner = false;\r\n        }\r\n        this.props.getProfileWithStatus(userId);\r\n        window.scrollTo(0,0);\r\n    }\r\n    componentDidMount() {\r\n        this.refreshProfile();\r\n    }\r\n    componentDidUpdate(prevProps: RouteComponentProps<{userID?: string}> & ProfileContainerPropsType) {\r\n        if ((this.props.match.params.userID !== prevProps.match.params.userID) || (this.props.me !== prevProps.me)) {\r\n            this.refreshProfile();\r\n        }\r\n    }\r\n    render() {\r\n        if (this.props.isFetching || !this.props.profile) { return <Preloader /> }\r\n        return <Profile {...this.props} isOwner={this.isOwner}/>\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state: AppStateType) => {\r\n    return {\r\n        profile: state.profilePage.profile,\r\n        posts: state.profilePage.posts,\r\n        isFetching: state.profilePage.isFetching,\r\n        status: state.profilePage.status,\r\n        me: state.auth.id,\r\n        uploadingPhoto: state.profilePage.uploadingPhoto,\r\n        updatingProfile: state.profilePage.updatingProfile,\r\n        updateFetching: state.profilePage.updateFetching,\r\n        friends: state.usersPage.friends,\r\n        followingUsers: state.usersPage.followingUsers\r\n    }\r\n}\r\nconst mapDispatchToProps = { getProfileWithStatus, \r\n    addPost: profileActions.addPost,\r\n    deletePost: profileActions.deletePost,\r\n    likePost: profileActions.likePost,\r\n    togglePreloader: profileActions.togglePreloader,\r\n    updateStatus,\r\n    savePhoto, \r\n    updatingProfileInProcess: profileActions.updatingProfileInProcess,\r\n    updateProfile,\r\n    reset,\r\n    follow,\r\n    unfollow}\r\nexport default compose<React.ComponentType>(connect(mapStateToProps, mapDispatchToProps), withRouter, withAuthRedirect)(ProfileContainer);","import React from 'react'\r\nimport { Dropdown, Image } from 'semantic-ui-react'\r\n\r\nimport { NavLink } from 'react-router-dom';\r\nimport classes from './Header.module.css'\r\n\r\ntype PropsType = {\r\n  photo: string | null,\r\n  name: string | null,\r\n  login: string,\r\n  logout: () => void\r\n}\r\nconst UserMenu: React.FC<PropsType> = (props) => {\r\n    const trigger = (\r\n        <span className={classes.dropdownMenu}>\r\n          <Image avatar src={props.photo} /> {props.name}\r\n        </span>\r\n      )\r\n      \r\n      const options = [\r\n        {\r\n          key: 'user',\r\n          text: (\r\n            <span className={classes.menuTitle}>\r\n              Signed in as <strong>{props.login}</strong>\r\n            </span>\r\n          ),\r\n          disabled: true,\r\n        },\r\n        { key: 'profile', icon: 'user', content: (<NavLink className={classes.option} to=\"/profile\">Account</NavLink>) },\r\n        { key: 'sign-out', icon: 'sign out', content: (<span className={classes.option} onClick={props.logout}>Log Out</span>) }\r\n      ]\r\n\r\n    return (\r\n        <Dropdown pointing='top right' trigger={trigger} floating options={options} className={classes.menuContainer}/>\r\n    )\r\n}\r\n  \r\n\r\nexport default UserMenu;","import classes from './Header.module.css';\r\nimport React, { useState } from 'react';\r\nimport { RouteComponentProps, withRouter } from 'react-router-dom';\r\nimport { Icon } from 'semantic-ui-react';\r\n\r\n//withRouter props ??\r\nconst Search: React.FC<RouteComponentProps> = (props) => {\r\n    let [term, setTerm] = useState('');\r\n    const searchUser = (key: React.KeyboardEvent<HTMLInputElement>) => {\r\n        if (key.keyCode === 13 && term.length > 0) {\r\n            props.history.push('/users?term=' + term);\r\n            setTerm('');\r\n        }\r\n    }\r\n    return (\r\n        <div className={classes.searchBar}>\r\n            <input value={term} placeholder=\"Search people here\" onKeyDown={e => { searchUser(e) }}\r\n                onChange={(e) => { setTerm(e.currentTarget.value) }} className={classes.searchField} />\r\n            <div className={classes.iconContainer}><Icon name=\"sistrix\" className={classes.searchIcon} /></div>\r\n            <div className={classes.searchOptions}>Some options</div>\r\n        </div>\r\n    )\r\n\r\n}\r\n\r\nexport default withRouter(Search);","import React from 'react';\r\nimport classes from './Header.module.css';\r\nimport { NavLink, RouteComponentProps } from 'react-router-dom';\r\nimport UserMenu from './UserMenu';\r\nimport Search from './Search';\r\nimport { MapStateToPropsType, MapDispatchToPropsType } from './Header-container';\r\n\r\n//withRouter ??\r\n\r\ntype PropsType = MapStateToPropsType & MapDispatchToPropsType\r\nconst Header: React.FC<PropsType & RouteComponentProps> = (props) => {\r\n    const location = props.location.pathname.split('/')[1];\r\n    return (\r\n        <header className={classes.header + ' ' + classes.horizontalBar}>\r\n            <div className={classes.logo}></div>\r\n            <div className={classes.currentPageName}>{location.charAt(0).toUpperCase() + location.slice(1).toLowerCase() + ' page'}</div>\r\n            <Search />\r\n                {props.login\r\n                ? <UserMenu photo ={props.photo} name={props.name} logout={props.logout} login={props.login}/>\r\n                : <NavLink className={classes.login} to=\"/login\">Login</NavLink>}\r\n        </header>\r\n    );\r\n}\r\n\r\nexport default Header;","import { authAPI, AuthResponse, profileAPI, ResultCodes, ResultCodeWithCaptcha } from \"../api/api\";\r\nimport { FormAction, resetSection, stopSubmit } from \"redux-form\";\r\nimport { ActionsType } from \"../types/types\";\r\nimport { ThunkAction } from \"redux-thunk\";\r\nimport { AppStateType } from \"./redux-store\";\r\n\r\nconst initialState = {\r\n    id: null as number | null,\r\n    email: null as string | null,\r\n    login: null as string | null,\r\n    name: null as string | null,\r\n    photo: null as string | null,\r\n    isAuth: false,\r\n    captcha: null as string | null, \r\n    isFetching: false\r\n}\r\ntype InitialStateType = typeof initialState;\r\n\r\nconst actions = {\r\n    setUserData : (id: number | null, email: string | null, login: string | null, isAuth: boolean) =>\r\n    ({ type: 'SET_USER_DATA', payload: {id, email, login, isAuth} } as const),\r\n    setUserInfo : (name: string | null, photo: string | null) => ({ type: 'SET_USER_INFO', payload: {name, photo} } as const),\r\n    setCaptchaPicture : (captcha: string | null) => ({type: 'SET_CAPTCHA_PICTURE', payload: {captcha}} as const),\r\n    toggleIsFetching : (isFetching: boolean) => ({type: 'TOGGLE_IS_FETCHING', payload: {isFetching}} as const)\r\n}\r\n\r\ntype AuthActionsType = ActionsType<typeof actions>\r\n\r\nconst authReducer = (state = initialState, action: AuthActionsType): InitialStateType => {\r\n    switch (action.type) {\r\n        case 'SET_USER_DATA': \r\n        case 'SET_USER_INFO':\r\n        case 'SET_CAPTCHA_PICTURE':\r\n        case 'TOGGLE_IS_FETCHING':\r\n            return {...state, ...action.payload}\r\n\r\n        default: return state;\r\n    }\r\n}\r\n\r\ntype ThunkType = ThunkAction<Promise<void>, AppStateType, unknown, AuthActionsType | FormAction>\r\n\r\n\r\nexport const auth = (): ThunkType => {\r\n    return (dispatch) => {\r\n        return authAPI.auth().then((data: AuthResponse) => {\r\n            if (data.resultCode === ResultCodes.Success) {\r\n                dispatch(actions.setUserData(data.data.id, data.data.email, data.data.login, true));\r\n                profileAPI.getProfile(data.data.id).then((data) => {\r\n                    dispatch(actions.setUserInfo(data.fullName, data.photos.small));\r\n                })\r\n                dispatch(actions.setCaptchaPicture(null));\r\n            }\r\n            dispatch(actions.toggleIsFetching(false));\r\n        })\r\n    }\r\n}\r\nexport const login = (email: string, password: string, rememberMe: boolean, captcha: string): ThunkType => {\r\n    return async (dispatch) => {\r\n        dispatch(actions.toggleIsFetching(true));\r\n        let response = await authAPI.login(email, password, rememberMe, captcha);\r\n        dispatch(resetSection('loginForm', 'captcha'))\r\n        if (response.resultCode === ResultCodes.Success) {\r\n            dispatch(auth());\r\n        } else {\r\n            dispatch(stopSubmit(\"loginForm\", { _error: response.messages[0] }));\r\n            response.resultCode === ResultCodeWithCaptcha.CaptchaRequired && dispatch(getCaptcha());\r\n            dispatch(actions.toggleIsFetching(false));\r\n        }\r\n    }\r\n}\r\nconst getCaptcha = (): ThunkType => {\r\n    return async (dispatch) => {\r\n        let response = await authAPI.getCaptcha();\r\n        dispatch(actions.setCaptchaPicture(response.url));\r\n    }\r\n}\r\nexport const logout = (): ThunkType => {\r\n    return async (dispatch) => {\r\n        let response = await authAPI.logout()\r\n        if (response.resultCode === ResultCodes.Success) {\r\n            dispatch(actions.setUserData(null, null, null, false));\r\n            dispatch(actions.setUserInfo(null, null));\r\n        }\r\n    }\r\n}\r\n\r\nexport default authReducer;","import Header from './Header';\r\nimport { logout } from '../../redux/auth-reducer';\r\nimport { connect } from 'react-redux';\r\nimport { compose } from 'redux';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { AppStateType } from '../../redux/redux-store';\r\n\r\n//withRouter ??\r\nconst mapStateToProps = (state: AppStateType) => {\r\n    return {\r\n        id: state.auth.id,\r\n        email: state.auth.email,\r\n        login: state.auth.login,\r\n        name: state.auth.name,\r\n        photo: state.auth.photo\r\n    }\r\n}\r\nconst mapDispatchToProps = {logout};\r\nexport type MapStateToPropsType = ReturnType<typeof mapStateToProps>\r\nexport type MapDispatchToPropsType = typeof mapDispatchToProps;\r\nconst HeaderContainer = compose <React.ComponentType>(withRouter, connect (mapStateToProps, mapDispatchToProps))(Header);\r\n\r\nexport default HeaderContainer;","import React from 'react';\r\nimport classes from './login.module.css'\r\nimport { Field, reduxForm, InjectedFormProps } from 'redux-form';\r\nimport { Redirect } from 'react-router-dom';\r\nimport { Input } from '../common/Form-controls/Form-controls';\r\nimport { required, maxLength } from '../common/Form-controls/Form-validators';\r\nimport { login } from '../../redux/auth-reducer'\r\nimport { connect } from 'react-redux';\r\nimport { Button } from 'semantic-ui-react';\r\nimport { AppStateType } from '../../redux/redux-store';\r\n\r\n//redux form props??\r\nconst maxLength30 = maxLength(30);\r\n\r\ntype OwnPropsType = {\r\n    isFetching: boolean,\r\n    captcha: string | null\r\n}\r\nconst LoginForm: React.FC<OwnPropsType & InjectedFormProps<FormDataType, OwnPropsType>> = (props) => {\r\n\r\n    return (\r\n        <div className={classes.wrapper}>\r\n            <div className={classes.greetingText}>\r\n                <h1 className={classes.greetingTitle}>Welcome to my Social Network</h1>\r\n                <p>My name is Aleksandr Kirichenko, I'm React developer and this is my simple project of Social Network. \r\n                    Development is still in progress, so some pages and modules are hardcoded or just emulate interaction with server.\r\n                    For acquaintance with this application, please use guest account: kirichenko723@gmail.com, password: test</p>\r\n                <p>I'll be glad to answer all your questions. Contact me:</p>\r\n                <p> +7 (918) 048 14 90 (Viber, WhatsApp, Telegram).</p>\r\n            </div>\r\n\r\n            <form className={classes.loginForm} onSubmit={props.handleSubmit}>\r\n\r\n                <h1 className={classes.header}>Login to your Account</h1>\r\n\r\n                <div className={classes.formRow}>\r\n                    <Field type=\"text\" name=\"email\" component={Input}\r\n                    innerText=\"Email\" validate={[required, maxLength30]}/>\r\n                </div>\r\n\r\n                {props.error && <p className={classes.errorMessage}>{props.error}</p>}\r\n\r\n                <div className={classes.formRow}>\r\n                    <Field type=\"password\" name=\"password\" component={Input}\r\n                    innerText=\"Password\" validate={[required, maxLength30]}/>\r\n                </div>\r\n\r\n                <div className={classes.formRow}>\r\n                    <label className={classes.labelForCheckbox}>\r\n                        <Field type=\"checkbox\" name=\"rememberMe\" component=\"input\" className={classes.checkbox} /> remember me\r\n                    </label>\r\n                </div>\r\n                {props.captcha &&\r\n                    <div>\r\n                        <img src={props.captcha} alt='captcha' />\r\n                        <div><Field type=\"text\" defaultValue=\"\" component={Input} name=\"captcha\" placeholder=\"Captcha\" validate={[required]} /></div>\r\n                    </div>\r\n                }\r\n                {props.isFetching ?\r\n                    <Button className={classes.button} loading fluid type=\"submit\">Login</Button> :\r\n                    <Button className={classes.button} fluid type=\"submit\">Login</Button>\r\n                }\r\n            </form>\r\n            \r\n        </div>\r\n    )\r\n}\r\ntype FormDataType = {\r\n    email: string\r\n    password: string\r\n    rememberMe: boolean\r\n    captcha: string\r\n}\r\nconst LoginReduxForm = reduxForm<FormDataType, OwnPropsType>({ form: 'loginForm' })(LoginForm);\r\nconst Login: React.FC<ConnectedPropsType> = (props) => {\r\n    return props.isAuth ? <Redirect to=\"/profile\" />\r\n        : (\r\n            <div className={classes.loginPage}>\r\n                <LoginReduxForm\r\n                    isFetching={props.isFetching}\r\n                    captcha={props.captcha}\r\n                    onSubmit={(formData: FormDataType) => { props.login(formData.email, formData.password, formData.rememberMe, formData.captcha) }}\r\n                />\r\n            </div>\r\n        )\r\n}\r\nconst mapStateToProps = (state: AppStateType) => {\r\n    return {\r\n        isAuth: state.auth.isAuth,\r\n        captcha: state.auth.captcha,\r\n        isFetching: state.auth.isFetching\r\n    }\r\n}\r\ntype MapStateToPropsType = ReturnType<typeof mapStateToProps>\r\ntype MapDispatchToPropsType = {login: (email: string, password: string, rememberMe: boolean, captcha: string) => void}\r\ntype ConnectedPropsType = MapStateToPropsType & MapDispatchToPropsType;\r\nexport default connect(mapStateToProps, { login })(Login);","import { ActionsType, BaseThunkType } from '../types/types';\r\nimport { auth } from './auth-reducer';\r\n\r\ntype AppActionsType = ActionsType<typeof appActions>\r\ntype ThunkType = BaseThunkType<AppActionsType>\r\ntype InitialStateType = typeof initialState\r\n\r\nconst appActions = {\r\n    initializeSuccess : () => ({type: 'INITIALIZE_SUCCESS'})\r\n}\r\nconst initialState = {\r\n    initialized: false\r\n}\r\n\r\nexport const appReducer = (state = initialState, action: AppActionsType): InitialStateType => {\r\n    switch (action.type) {\r\n    case 'INITIALIZE_SUCCESS' :\r\n        return {...state, initialized: true}    \r\n    default: return state;\r\n    }\r\n}\r\n\r\nexport const initializing = (): ThunkType => {\r\n    return async (dispatch) => {\r\n        await dispatch(auth());\r\n        dispatch(appActions.initializeSuccess());\r\n    }\r\n}","import React from 'react';\r\nimport classes from '../Header/Header.module.css';\r\n\r\nconst Footer: React.FC = () => {\r\n    return (\r\n        <footer className={classes.footer + ' ' + classes.horizontalBar}>\r\n            <div className={classes.logo}></div>\r\n        </footer>\r\n    )\r\n}\r\nexport default Footer;\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport Users from '../Users/Users';\r\nimport { follow, unfollow, onPageChanged } from '../../redux/users-reducer';\r\nimport { AppStateType } from '../../redux/redux-store';\r\nimport { getUsersTotalCount } from './../../redux/users-selectors';\r\n\r\ntype MapStateToPropsType = ReturnType<typeof mapStateToProps>\r\ntype MapDispatchToPropsType = {\r\n    follow: (userId: number) => void\r\n    unfollow: (userId: number) => void\r\n    onPageChanged: (pageNumber: number, pageSize: number, term?: string) => void\r\n}\r\nexport type UsersConnectedPropsType = MapStateToPropsType & MapDispatchToPropsType\r\n\r\nconst Friends: React.FC<UsersConnectedPropsType> = (props) => (\r\n    <Users\r\n        users={props.users}\r\n        follow={props.follow}\r\n        unfollow={props.unfollow}\r\n        isFetching={props.isFetching}\r\n        followingUsers={props.followingUsers}\r\n        usersTotalCount={props.usersTotalCount}\r\n        pageSize={props.pageSize}\r\n        currentPage={props.currentPage}\r\n        onPageChanged={props.onPageChanged}\r\n        term={props.term}\r\n        paginationButtonsCount={props.paginationButtonsCount}\r\n    />\r\n)\r\n\r\nconst mapStateToProps = (state: AppStateType) => ({\r\n    users: state.usersPage.friends,\r\n    isFetching: state.usersPage.isFetching,\r\n    followingUsers: state.usersPage.followingUsers,\r\n    usersTotalCount: getUsersTotalCount(state),\r\n    paginationButtonsCount: state.usersPage.paginationButtonsCount,\r\n    currentPage: state.usersPage.currentPage,\r\n    pageSize: state.usersPage.pageSize,\r\n    term: state.usersPage.term,\r\n})\r\nconst mapDispatchToProps = { follow, unfollow, onPageChanged }\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Friends)","import { getNewsFromServer } from '../api/api';\r\nimport { ActionsType, BaseThunkType } from '../types/types';\r\n\r\nconst initialState = {\r\n    news: [] as Array<NewsType>,\r\n    newsCount: null as number | null,\r\n    isFetching: false\r\n}\r\ntype NewsType = {\r\n    articles: Array<string>,\r\n    totalResults: number\r\n}\r\ntype InitialStateType = typeof initialState;\r\ntype NewsActionsType = ActionsType<typeof newsActions>\r\ntype ThunkType = BaseThunkType<NewsActionsType>\r\nconst newsActions = {\r\n    setNews : (news: Array<NewsType>, newsCount: number) => ({type: 'SET_NEWS', news, newsCount} as const),\r\n    toggleFetching : (isFetching: boolean) => ({type: 'TOGGLE_FETCHING', isFetching} as const)\r\n}\r\n\r\nexport const newsReducer = (state = initialState, action: NewsActionsType): InitialStateType => {\r\n    switch (action.type) {\r\n        case 'SET_NEWS' :\r\n            return {...state, news: action.news, newsCount: action.newsCount};\r\n        case 'TOGGLE_FETCHING' :\r\n            return {...state, isFetching: action.isFetching}\r\n        default: return state\r\n    }\r\n}\r\n\r\nexport const getNews = (): ThunkType => {\r\n    return async (dispatch) => {\r\n        dispatch(newsActions.toggleFetching(true));\r\n        let news = await getNewsFromServer();\r\n        if (news.status === 'ok') {\r\n            dispatch(newsActions.setNews(news.articles, news.totalResults));\r\n        }\r\n        dispatch(newsActions.toggleFetching(false));\r\n    }\r\n}\r\n","import { createStore, combineReducers, applyMiddleware, compose } from 'redux';\r\nimport profileReducer from './profile-reducer';\r\nimport dialogsReducer from './dialogs-reducer';\r\nimport usersReducer from './users-reducer';\r\nimport authReducer from './auth-reducer';\r\nimport thunkMiddleware from 'redux-thunk';\r\nimport {reducer as formReducer} from 'redux-form';\r\nimport { appReducer } from './app-reducer';\r\nimport { albumReducer } from './album-reducer';\r\nimport { newsReducer } from './news-reducer';\r\n\r\nlet globalReducer = combineReducers({\r\n    messagesPage: dialogsReducer,\r\n    profilePage: profileReducer,\r\n    usersPage: usersReducer,\r\n    auth: authReducer,\r\n    form: formReducer,\r\n    app: appReducer,\r\n    album: albumReducer,\r\n    newsPage: newsReducer\r\n})\r\ntype GlobalReducerType = typeof globalReducer;\r\nexport type AppStateType = ReturnType<GlobalReducerType>;\r\ndeclare global {\r\n    interface Window {\r\n      __REDUX_DEVTOOLS_EXTENSION_COMPOSE__?: typeof compose;\r\n    }\r\n  }\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\nconst store = createStore(globalReducer, composeEnhancers(applyMiddleware(thunkMiddleware)));\r\nexport default store;","import React from 'react';\nimport './App.css';\nimport 'semantic-ui-css/semantic.min.css'\nimport LeftNavbar from './components/Navbar/LeftNavbar';\nimport RightNavbar from './components/Navbar/RightNavbar';\nimport { Route, Switch, Redirect } from 'react-router-dom';\nimport DialogsContainer from './components/Dialogs/Dialogs-container';\nimport ProfileContainer from './components/Profile/Profile-container';\nimport HeaderContainer from './components/Header/Header-container';\nimport Login from './components/Login/Login';\nimport { initializing } from './redux/app-reducer';\nimport Preloader from './components/common/Preloader/Preloader';\nimport { connect, Provider } from 'react-redux';\nimport { withSuspense } from './hoc/withSuspense';\nimport Footer from './components/Footer/Footer';\nimport Friends from './components/Friends/Friends';\nimport store, { AppStateType } from './redux/redux-store';\n\nconst UsersContainer = React.lazy(() => import('./components/Users/Users-container'));\n\ntype MapStatePropsType = ReturnType<typeof mapStateToProps>\ntype MapDispatchPropsType = { initializing: () => void };\nclass App extends React.Component<MapStatePropsType & MapDispatchPropsType> {\n  componentDidMount() {\n    this.props.initializing();\n  }\n  render() {\n    return !this.props.initialized\n      ? <Preloader />\n      : (\n        <div className=\"app-wrapper\">\n          <Switch>\n            <Route path='/login' render={() => <Login />} />\n            <>\n              <Route path='/' component={HeaderContainer} />\n              <LeftNavbar />\n              <div className=\"content\">\n                <Switch>\n                  <Route exact path='/' render={() => <Redirect to=\"/profile\" />} />\n                  <Route path='/dialogs/:userID?' render={() => <DialogsContainer />} />\n                  <Route path='/profile/:userID?' render={() => <ProfileContainer />} />\n                  {/* \n                  React news page is temporary disabled due to CORS problems\n                  <Route path='/news' component={News} /> */}\n                  <Route path='/friends' component={Friends} />\n                  <Route path='/users' render={withSuspense<{}>(UsersContainer)} />\n                  <Route path='*' render={() => <div><h1>Page not found</h1></div>} />\n                </Switch>\n              </div>\n              <RightNavbar />\n              <Footer />\n            </>\n          </Switch>\n        </div>\n      );\n  }\n}\n\nconst mapStateToProps = (state: AppStateType) => {\n  return ({\n    initialized: state.app.initialized\n  })\n}\n\nconst ConnectedApp = connect(mapStateToProps, { initializing })(App)\n\nconst SocialNetwork = () => (\n  <Provider store={store}>\n    <ConnectedApp />\n  </Provider>\n)\nexport default SocialNetwork;\n","import React from 'react';\r\nimport Preloader from '../components/common/Preloader/Preloader';\r\n\r\nexport function withSuspense <WCP>(Component: React.ComponentType<WCP>) {\r\n    return (props: WCP) => \r\n    <React.Suspense fallback={<Preloader/>}>\r\n         <Component {...props}/>\r\n    </React.Suspense>\r\n    \r\n}","import './index.css';\nimport React from 'react';\nimport {render} from 'react-dom';\nimport SocialNetwork from './App';\nimport { HashRouter } from 'react-router-dom';\n\nrender(\n    <HashRouter>\n        <SocialNetwork />\n    </HashRouter>,\n    document.getElementById('root')\n);\n","import React from 'react';\r\nimport preloader from '../../../images/Preloader.gif';\r\nimport classes from './preloader.module.css';\r\n\r\nlet Preloader: React.FC = () => {\r\n    return (\r\n        <div className={classes.preloader} data-testid=\"preloader\">\r\n            <img src={preloader} alt=\"preloader\" className={classes.image}/>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Preloader;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"profileForm\":\"EditProfile_profileForm__3rtCR\",\"contacts\":\"EditProfile_contacts__2GaV9\",\"contact\":\"EditProfile_contact__2JPgL\",\"formRow\":\"EditProfile_formRow__3-UE-\",\"shortInput\":\"EditProfile_shortInput__BCOIr\",\"aboutMe\":\"EditProfile_aboutMe__3Cy1y\",\"buttons\":\"EditProfile_buttons__2uEP0\",\"bottomSection\":\"EditProfile_bottomSection__29LD7\",\"bigCheckbox\":\"EditProfile_bigCheckbox__2Q7N3\"};","import { followAPI, ResultCodes, usersAPI, ResponseType } from '../api/api';\r\nimport { ActionsType, UserType } from '../types/types';\r\nimport { changeValuesInArray } from '../Utils/Array-changers';\r\nimport { ThunkAction } from 'redux-thunk';\r\nimport { AppStateType } from './redux-store';\r\nimport { Dispatch } from 'react';\r\n\r\nconst initialState = {\r\n    users: [] as Array<UserType>,\r\n    friends: [] as Array<UserType>,\r\n    usersTotalCount: 0,\r\n    currentPage: 1,\r\n    pageSize: 100,\r\n    term: null as string | null,\r\n    paginationButtonsCount: 3,\r\n    isFetching: false,\r\n    followingUsers: [] as Array<number>\r\n}\r\nexport type InitialStateType = typeof initialState;\r\n\r\n//Action creators\r\nexport const usersActions = {\r\n    followSuccess : (userId: number) => ({ type: 'FOLLOW_SUCCESS', userId } as const),\r\n    unfollowSuccess : (userId: number) => ({ type: 'UNFOLLOW_SUCCESS', userId } as const),\r\n    setUsers : (users: Array<UserType>) => ({ type: 'SET_USERS', users } as const),\r\n    setFriends : (friends: Array<UserType>) => ({ type: 'SET_FRIENDS', friends } as const),\r\n    setTerm : (term: string | null) => ({ type: 'SET_TERM', term } as const),\r\n    increasePageSize : () => ({ type: 'INCREASE_PAGE_SIZE' } as const),\r\n    setCurrentPage : (currentPage: number) => ({ type: 'SET_CURRENT_PAGE', currentPage } as const),\r\n    setUsersTotalCount : (usersTotalCount: number) => ({ type: 'SET_USERS_TOTAL_COUNT', usersTotalCount } as const),\r\n    togglePreloader : (isFetching: boolean) => ({ type: 'TOGGLE_IS_FETCHING', isFetching } as const),\r\n    toggleFollowingButton : (userId: number) => ({ type: 'TOGGLE_FOLLOWING_BUTTON', userId } as const)\r\n}\r\n\r\ntype UsersActionsType = ActionsType<typeof usersActions>\r\nconst usersReducer = (state = initialState, action: UsersActionsType): InitialStateType => {\r\n    switch (action.type) {\r\n        case 'FOLLOW_SUCCESS':\r\n            return {\r\n                ...state,\r\n                users: changeValuesInArray(state.users, 'id', action.userId, 'followed', true),\r\n                friends: changeValuesInArray(state.friends, 'id', action.userId, 'followed', true)\r\n            }\r\n        case 'UNFOLLOW_SUCCESS':\r\n            return {\r\n                ...state,\r\n                users: changeValuesInArray(state.users, 'id', action.userId, 'followed', false),\r\n                friends: changeValuesInArray(state.friends, 'id', action.userId, 'followed', false)\r\n            }\r\n        case 'INCREASE_PAGE_SIZE':\r\n            return { ...state, pageSize: state.pageSize + 5 };\r\n        case 'SET_CURRENT_PAGE':\r\n            return { ...state, currentPage: action.currentPage };\r\n        case 'SET_USERS_TOTAL_COUNT':\r\n            return { ...state, usersTotalCount: action.usersTotalCount };\r\n        case 'SET_USERS':\r\n            return { ...state, users: [...action.users] };\r\n        case 'SET_FRIENDS':\r\n            return { ...state, friends: [...action.friends] };\r\n        case 'SET_TERM':\r\n            return { ...state, term: action.term };\r\n        case 'TOGGLE_IS_FETCHING':\r\n            return { ...state, isFetching: action.isFetching ? true : false };\r\n        case 'TOGGLE_FOLLOWING_BUTTON':\r\n            return {\r\n                ...state, followingUsers: state.followingUsers.some((user) => user === action.userId)\r\n                    ? state.followingUsers.filter(user => user !== action.userId)\r\n                    : state.followingUsers.concat(action.userId)\r\n            };\r\n        default: return { ...state };\r\n    }\r\n}\r\n\r\n\r\n//Thunk creators\r\ntype ThunkCreatorType = ThunkAction<Promise<void>, AppStateType, unknown, UsersActionsType>\r\nexport const getUsers = (currentPage: number, pageSize: number, term?: string, friend?: boolean): ThunkCreatorType => {\r\n    return async (dispatch) => {\r\n        dispatch(usersActions.togglePreloader(true));\r\n        let data;\r\n        if (!term) {\r\n            data = await usersAPI.getUsersFromServer(1, 10, term, friend);\r\n            let pages = Math.ceil(data.totalCount / pageSize);\r\n            let currentPageFromEnd = pages - currentPage;\r\n            data = await usersAPI.getUsersFromServer(currentPageFromEnd, pageSize, null, friend)\r\n        } else {\r\n            data = await usersAPI.getUsersFromServer(currentPage, pageSize, term, friend)\r\n        }\r\n        dispatch(usersActions.setUsers(data.items));\r\n        dispatch(usersActions.setUsersTotalCount(data.totalCount));\r\n        dispatch(usersActions.togglePreloader(false));\r\n    }\r\n}\r\nexport const getFriends = (): ThunkCreatorType => {\r\n    return async (dispatch) => {\r\n        let friends = await usersAPI.getUsersFromServer(1, 100, null, true);\r\n        dispatch(usersActions.setFriends(friends.items));\r\n\r\n    }\r\n}\r\nexport const showMoreUsers = (pageSize: number): ThunkCreatorType => {\r\n    return async (dispatch) => {\r\n        dispatch(usersActions.togglePreloader(true));\r\n        dispatch(usersActions.increasePageSize());\r\n        let data = await usersAPI.getUsersFromServer(1, pageSize + 5)\r\n        dispatch(usersActions.setUsers(data.items));\r\n        dispatch(usersActions.togglePreloader(false));\r\n    }\r\n}\r\nconst followFlow = async (dispatch: Dispatch<UsersActionsType>, userId: number,\r\n    apiMethod: (userId: number) => Promise<ResponseType>, actionMethod: (userId: number) => UsersActionsType) => {\r\n    dispatch(usersActions.toggleFollowingButton(userId));\r\n        let data = await apiMethod(userId);\r\n        if (data.resultCode === ResultCodes.Success) {\r\n            dispatch(actionMethod(userId));\r\n            dispatch(usersActions.toggleFollowingButton(userId));\r\n        }\r\n}\r\nexport const follow = (userId: number): ThunkCreatorType => {\r\n    return async (dispatch) => {\r\n        await followFlow(dispatch, userId, followAPI.follow, usersActions.followSuccess)\r\n    }\r\n}\r\nexport const unfollow = (userId: number): ThunkCreatorType => {\r\n    return async (dispatch) => {\r\n        await followFlow(dispatch, userId, followAPI.unfollow, usersActions.unfollowSuccess)\r\n    }\r\n}\r\nexport const onPageChanged = (pageNumber: number, pageCount: number, term?: string, friend?: boolean): ThunkCreatorType => {\r\n    return async (dispatch) => {\r\n        dispatch(getUsers(pageNumber, pageCount, term, friend))\r\n        dispatch(usersActions.setCurrentPage(pageNumber));\r\n    }\r\n}\r\n\r\nexport default usersReducer;","export const changeValuesInArray = (array, paramSearched, searchedValue, paramToChange, valueToChange) => {\r\n    return array.map((obj) => {\r\n        if (obj[paramSearched] === searchedValue) {\r\n            obj[paramToChange] = valueToChange;\r\n        }\r\n        return obj;\r\n    })\r\n}\r\n\r\nexport const getRandomArr = (arr, elementsCount) => {\r\n    if (arr.length <= elementsCount) {\r\n        return arr\r\n    } else {\r\n        return arr.sort(() => 0.5 - Math.random()).slice(0, elementsCount)\r\n    }\r\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"formControl\":\"Form-controls_formControl__2oyjK\",\"hasError\":\"Form-controls_hasError__1ymOg\",\"errorMessage\":\"Form-controls_errorMessage__2eCZC\",\"wideInput\":\"Form-controls_wideInput__2KXQf\",\"wideTextarea\":\"Form-controls_wideTextarea__3-CKz\",\"innerText\":\"Form-controls_innerText__i3Fsc\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"description\":\"ProfileDescription_description__1QKl0\",\"descriptionBlock\":\"ProfileDescription_descriptionBlock__3P2a8\",\"title\":\"ProfileDescription_title__m5q96\",\"text\":\"ProfileDescription_text__f-rgZ\",\"smallTitle\":\"ProfileDescription_smallTitle__afrL5\",\"newPost\":\"ProfileDescription_newPost__2rVSV\",\"user\":\"ProfileDescription_user__1r7_5\",\"post\":\"ProfileDescription_post__3CNnB\",\"dropdown\":\"ProfileDescription_dropdown__1VwQO\",\"postText\":\"ProfileDescription_postText__3gRFx\",\"postHeader\":\"ProfileDescription_postHeader__2Hksa\",\"author\":\"ProfileDescription_author__2n9WI\",\"userName\":\"ProfileDescription_userName__2Iy9V\",\"date\":\"ProfileDescription_date__12-mM\",\"postInfo\":\"ProfileDescription_postInfo__3OKpI\",\"likes\":\"ProfileDescription_likes__3rVe9\",\"friendsBlock\":\"ProfileDescription_friendsBlock__dQXvs\",\"photo\":\"ProfileDescription_photo__DD6WX\",\"photosBlock\":\"ProfileDescription_photosBlock__2vOoY\",\"fullscreenPhoto\":\"ProfileDescription_fullscreenPhoto__N-_xD\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"selectedPage\":\"Paginator_selectedPage__3XoyN\",\"paginator\":\"Paginator_paginator__mecTG\",\"button\":\"Paginator_button__2moz4\",\"pages\":\"Paginator_pages__3bSVG\"};"],"sourceRoot":""}